(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"/jXm":function(module,exports){module.exports="https://coursera_assets.s3.amazonaws.com/images/936656fd1abe653421cc69c023df8848.svg"},"2Kkf":function(module,e,n){"use strict";var t=n("17x9"),a=n.n(t),i=n("MnCE"),r=n("8cuT"),o=n("qyGb"),s=n("fH9y"),c=n("Ezgt"),d=Object(i.b)(Object(i.c)({executeAction:a.a.func.isRequired}),Object(r.a)(["CourseStore"],(function(e,n){var t=e.CourseStore,a=n.executeAction,i=t.getCourseId(),r=t.getCourseSlug();return{refreshCourseProgress:function(){a(s.b,{courseId:i}),a(c.a,{courseId:i,refreshProgress:!0}),a(o.a,{courseSlug:r,refetch:!0})}}})));e.a=d},"46xw":function(module,exports,e){e("j5nu")},"5B3L":function(module,e,n){"use strict";var t,a=n("q1tI"),i=n.n(a),r=n("MnCE"),o=n("8cuT"),s=n("Y74u"),c=n("sQ/U"),d=n("QILm"),l=n.n(d),u=n("fsL8"),m=n.n(u),p=n("yXPU"),g=n.n(p),v=n("J4zp"),f=n.n(v),h=n("/MKj"),b=n("DU3t"),k=n("ANjH"),C=n("lSNA"),S=n.n(C),y=n("3tO9"),O=n.n(y),createReducer=function(e,n,t){return e[t.type]?e[t.type](n,t):n},I=n("fNnY"),w={showChat:!1,isFullScreen:!1,disabledInput:!1,messageLoader:!1},j=S()(S()(S()(S()(S()(S()({},I.v,(function(e){return e.isFullScreen?O()(O()({},e),{},{showChat:!e.showChat,isFullScreen:!1}):O()(O()({},e),{},{showChat:!e.showChat})})),I.p,(function(e){return O()(O()({},e),{},{showChat:!0})})),I.f,(function(e){return O()(O()({},e),{},{showChat:!1})})),I.w,(function(e){return O()(O()({},e),{},{isFullScreen:!e.isFullScreen})})),I.x,(function(e,n){var t=n.isDisabled;return O()(O()({},e),{},{disabledInput:t})})),I.i,(function(e,n){var t=n.messageLoader;return O()(O()({},e),{},{messageLoader:t})})),x={inputText:""},E=S()({},I.u,(function(e,n){return O()(O()({},e),{},{inputText:n.inputText})})),N=n("RIqP"),A=n.n(N),T=n("ntUh"),R=n("mtOI");function createNewMessage(e){var n=e.text,t=e.sender,a=e.id,i=e.clipRecommendations,r=e.userFeedback,o=e.timestamp,s=e.recommendedActions,c=e.action,d=e.navigationButtons;return{type:T.b.TEXT,component:R.f,text:n,sender:t,timestamp:o?new Date(o):new Date,showAvatar:!0,customId:a,unread:t===T.c.RESPONSE,clipRecommendations:i,userFeedback:r,recommendedActions:s,action:c,navigationButtons:d}}function createLinkSnippet(e,n){return{type:T.b.SNIPPET.LINK,component:R.k,title:e.title,link:e.link,target:e.target||"_blank",sender:T.c.RESPONSE,timestamp:new Date,showAvatar:!0,customId:n,unread:!0}}function createComponentMessage(e,n,t,a){return{type:T.b.CUSTOM_COMPONENT,component:e,props:n,sender:T.c.RESPONSE,timestamp:new Date,showAvatar:t,customId:a,unread:!0}}var M={messages:[],chatSessionId:null,historicalMessagesMap:{},badgeCount:0},P=(t={},S()(S()(S()(S()(S()(S()(S()(S()(S()(S()(t,I.y,(function(e,n){var t=n.messages.map((function(e){return createNewMessage(e)}));return O()(O()({},e),{},{messages:t,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",t))})})),I.d,(function(e,n){var t=n.text,a=n.id,i=n.timestamp,r=n.action,o=[].concat(A()(e.messages),[createNewMessage({text:t,sender:T.c.CLIENT,id:a,timestamp:i,action:r})]);return O()(O()({},e),{},{messages:o,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",o))})})),I.c,(function(e,n){var t=n.text,a=n.id,i=n.clipRecommendations,r=n.userFeedback,o=n.timestamp,s=n.recommendedActions,c=n.navigationButtons,d=[].concat(A()(e.messages),[createNewMessage({text:t,sender:T.c.RESPONSE,id:a,clipRecommendations:i,userFeedback:r,timestamp:o,recommendedActions:s,navigationButtons:c})]);return O()(O()({},e),{},{messages:d,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",d)),badgeCount:e.badgeCount+1})})),I.b,(function(e,n){var t=n.link,a=n.id,i=[].concat(A()(e.messages),[createLinkSnippet(t,a)]);return O()(O()({},e),{},{messages:i,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",i))})})),I.a,(function(e,n){var t=n.component,a=n.props,i=n.showAvatar,r=n.id,o=[].concat(A()(e.messages),[createComponentMessage(t,a,i,r)]);return O()(O()({},e),{},{messages:o,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",o))})})),I.h,(function(e){return O()(O()({},e),{},{messages:[],historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",[])),badgeCount:0})})),I.m,(function(e,n){var t=n.index;e.messages[t].showAvatar=!1;var a=e.historicalMessagesMap[e.chatSessionId||""];a&&(a[t].showAvatar=!1)})),I.g,(function(e,n){var t=n.count,a=n.id,i=a?e.messages.filter((function(_,n){var i=e.messages.findIndex((function(e){return e.customId===a}));return n<i-t+1||n>i})):e.messages.slice(0,e.messages.length-t);return O()(O()({},e),{},{messages:i,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",i)),badgeCount:i.filter((function(e){return e.unread})).length})})),I.q,(function(e,n){var t=n.count;return O()(O()({},e),{},{badgeCount:t})})),I.n,(function(e){var n=e.messages.map((function(e){return O()(O()({},e),{},{unread:!1})}));return O()(O()({},e),{},{messages:n,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",n)),badgeCount:0})})),S()(S()(S()(S()(t,I.j,(function(e,n){var t=n.id,a=e.messages.map((function(e){return O()(O()({},e),{},{userFeedback:t===e.customId?T.a.like:e.userFeedback})}));return O()(O()({},e),{},{messages:a,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",a))})})),I.k,(function(e,n){var t=n.id,a=e.messages.map((function(e){return O()(O()({},e),{},{userFeedback:t===e.customId?T.a.dislike:e.userFeedback})}));return O()(O()({},e),{},{messages:a,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",a))})})),I.l,(function(e,n){var t=n.id,a=e.messages.map((function(e){return O()(O()({},e),{},{userFeedback:t===e.customId?T.a.unset:e.userFeedback})}));return O()(O()({},e),{},{messages:a,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",a))})})),I.r,(function(e,n){var t=n.chatSessionId;return O()(O()({},e),{},{chatSessionId:t})}))),F={chatSessionId:void 0,chatSessionStorageKey:void 0,chatState:b.f.Active},L=S()(S()(S()(S()(S()({},I.o,(function(e){return O()(O()({},e),{},{chatSessionId:void 0,chatSessionStorageKey:void 0})})),I.e,(function(e){return O()(O()({},e),{},{chatSessionId:void 0,chatSessionStorageKey:void 0})})),I.r,(function(e,n){var t=n.chatSessionId;return O()(O()({},e),{},{chatSessionId:t})})),I.s,(function(e,n){return O()(O()({},e),{},{chatSessionStorageKey:n})})),I.t,(function(e,n){return O()(O()({},e),{},{chatState:n.chatState})})),D=k.b,B=Object(k.a)({behavior:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0;return createReducer(j,e,n)},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,n=arguments.length>1?arguments[1]:void 0;return createReducer(P,e,n)},input:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,n=arguments.length>1?arguments[1]:void 0;return createReducer(E,e,n)},sessionState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,n=arguments.length>1?arguments[1]:void 0;return createReducer(L,e,n)}}),H=Object(k.c)(B,D()),V=n("6OIj"),U=n("xeAZ"),q=n.n(U),z=n("lX80"),G=n("Nbf1"),W=n("zXDh"),Y=n("b+Bk"),K=n.n(Y),Q=n("vDB9"),J={get:function(e){var n=Q.a.getItem(e,(function(e){return e}),"");return n&&"undefined"!==n?n:void 0},set:function(e,n){var t=n;Q.a.setItem(e,t,(function(e){return e}))},clear:function(e){Q.a.removeItem(e)}},X=n("saWA");function updateChatHistory(e){var n=X.w(e);H.dispatch(n)}function enableMsgLoader(e){H.dispatch(X.h(e))}function toggleInputDisabled(e){H.dispatch(X.v(e))}function dispatcher_setChatSessionId(e){H.dispatch(X.m(e))}function setChatState(e){H.dispatch(X.o(e))}function dispatcher_sendMessage(e){return _sendMessage.apply(this,arguments)}function _sendMessage(){return(_sendMessage=g()(m()().mark((function _callee(e){var n,t,a,i,r,o,s;return m()().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n=H.getState(),t=n.sessionState,a=t.chatSessionId,i=t.chatSessionStorageKey,r=t.chatState,o=new z.a,s=new G.a({uri:"/graphql-gateway?opname=AiCoach_CreateUserMessageAndReturnResponse",cache:o,headers:{"Accept-Language":Object(W.getIetfLanguageTag)()}}),""!==e.input.message.trim()){c.next=6;break}return c.abrupt("return",Promise.resolve(null));case 6:return d=e.input.message,l=void 0,u=void 0,m=e.input.action,H.dispatch(X.c(d,l,u,m)),enableMsgLoader(!0),c.abrupt("return",s.mutate({mutation:K.a,variables:{input:O()(O()({},e.input),{},{chatSessionId:a}),clipRecommendationsEnabled:e.clipRecommendationsEnabled,recommendedActionsEnabled:e.recommendedActionsEnabled},context:{clientName:"gatewayGql"}}).then((function(e){var n=e.data,t=(null==n?void 0:n.AiCoach_CreateUserMessageAndReturnResponse)||{},o=t.messageByAiCoach,s=t.clipRecommendations,c=t.recommendedActions,d=t.navigationButtons,l=t.session||{},u=l.id,m=l.status;m&&r!==m&&setChatState(m),enableMsgLoader(!1),a||dispatcher_setChatSessionId(u);var p=null==i?void 0:i.chatSessionStorageKey;return!J.get(p)&&u&&J.set(p,u),null!=o&&o.message&&H.dispatch(X.b(o.message,o.messageId,s,void 0,"",c,d)),n})));case 9:case"end":return c.stop()}var d,l,u,m}),_callee)})))).apply(this,arguments)}var Z=n("gtL6");function useChatHistory(e){var n=e.historyLimit,t=e.recommendedActionsEnabled,i=e.clipRecommendationsEnabled,r=e.skipStore,o=void 0!==r&&r,s=e.mode,c=Object(V.a)(),d=a.useState(!1),l=f()(d,2),u=l[0],p=l[1],v=a.useState(null),h=f()(v,2),b=h[0],k=h[1],C=!1,S=H.getState().sessionState.chatState,y=function(){var e=g()(m()().mark((function _callee(e){var a,r,d,l,u,g,v,f,h,b,y,O,I;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return p(!0),m.prev=1,m.next=4,c.query({query:q.a,variables:{chatSessionId:e,limit:n,recommendedActionsEnabled:t,clipRecommendationsEnabled:i},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 4:if(u=m.sent,(g=null===(a=u.data.AiCoach)||void 0===a?void 0:a.queryByChatSessionId.session.status)&&g!==S&&!o&&setChatState(g),null===(r=u.data)||void 0===r||null===(d=r.AiCoach)||void 0===d||null===(l=d.queryByChatSessionId)||void 0===l||!l.elements){m.next=14;break}return b=null===(v=u.data)||void 0===v?void 0:null===(f=v.AiCoach)||void 0===f?void 0:null===(h=f.queryByChatSessionId)||void 0===h?void 0:h.elements,y=b.map((function(e){return e.senderType===T.c.CLIENT?{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt}:e.senderType===T.c.RESPONSE?{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt,clipRecommendations:e.clipRecommendations,userFeedback:e.userFeedback,recommendedActions:e.recommendedActions,navigationButtons:e.navigationButtons,structuredResponse:e.structuredResponse}:{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt}})),O=y.reverse(),o||updateChatHistory(O),p(!1),m.abrupt("return",O);case 14:return m.abrupt("return",[]);case 17:return m.prev=17,m.t0=m.catch(1),C&&(k(m.t0),p(!1)),I=m.t0,Object(Z.a)({error:I,source:"useChatHistory",coachMode:s}),m.abrupt("return",[]);case 23:case"end":return m.stop()}}),_callee,null,[[1,17]])})));return function(n){return e.apply(this,arguments)}}();return a.useEffect((function(){return C=!0,function(){C=!1}}),[]),{loading:u,error:b,refreshHistory:y}}var ee,ne,te,ae,ie,re,oe,se,ce,de,le,ue,me,pe,ge,ve,fe,he,be,ke=n("kNe7"),Ce=n("IyUU"),Se=n.n(Ce),ye=n("EBS+"),hooks_useCreateUserChatSession=function(e){var n=e.itemId,t=e.courseId,i=e.inAuthoringMode,r=Object(c.b)().id.toString(),o=Object(V.a)(),s=a.useState(!1),d=f()(s,2),l=d[0],u=d[1],p=a.useState(null),v=f()(p,2),h=v[0],b=v[1];return{getNewChatSessionId:function(){var e=g()(m()().mark((function _callee(e){var a,s,c,d,l,p,g;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return a=Object(ye.e)(t,n,i),s="",u(!0),m.prev=3,m.next=6,o.mutate({mutation:Se.a,variables:{input:{title:e||a,userId:r}},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 6:null!=(d=m.sent)&&null!==(c=d.data)&&void 0!==c&&c.AiCoach_CreateChatSession&&(s=null===(l=d.data)||void 0===l?void 0:null===(p=l.AiCoach_CreateChatSession)||void 0===p?void 0:p.id),u(!1),m.next=16;break;case 11:m.prev=11,m.t0=m.catch(3),g=m.t0,b(m.t0),Object(ye.b)({error:g,source:"useCreateUserChatSession"});case 16:return m.abrupt("return",s);case 17:case"end":return m.stop()}}),_callee,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}(),loading:l,error:h}},useStartNewChatSession_useStartNewChatSession=function(e){var n=e.itemId,t=e.courseId,i=e.inAuthoringMode,r=hooks_useCreateUserChatSession({itemId:n,courseId:t,inAuthoringMode:i}),o=r.getNewChatSessionId,s=r.error;return{startNewChatSession:a.useCallback(function(){var e=g()(m()().mark((function _callee(e){var n;return m()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=void 0,a=H.getState().sessionState.chatSessionStorageKey,J.clear(null==a?void 0:a.chatSessionStorageKey),H.dispatch(X.d()),setChatState(b.f.Active),t.next=3,o(e);case 3:return dispatcher_setChatSessionId(n=t.sent),H.dispatch(X.g()),t.abrupt("return",n);case 7:case"end":return t.stop()}var a}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[o]),error:s}},Oe=n("Yql6"),Ie=n("oaVt"),useCoachItemSendMessage_handleMessageResponseError=function(e){var n,t,a,i,r,o,s,c;if(enableMsgLoader(!1),t={text:Object(T.e)()},a=t.text,i=t.id,r=t.clipRecommendations,o=t.userFeedback,s=t.timestamp,c=t.recommendedActions,H.dispatch(X.b(a,i,r,o,s,c)),e.graphQLErrors&&(null===(n=e.graphQLErrors)||void 0===n?void 0:n.length)>0){var d=e.graphQLErrors[0];d&&Object(ye.b)({error:d,source:"handleMessageResponseError"})}},useCoachItemSendMessage_endOfCoachChatRecommendedAction=function(e){var n;return null==e?void 0:null===(n=e.filter((function(e){return e.action===b.d.CoachItemSummary})))||void 0===n?void 0:n[0]},useCoachItemSendMessage_imStuckRecommendedAction=function(e){var n;return null==e?void 0:null===(n=e.filter((function(e){return e.action===b.d.CoachItemStuckContinue||e.action===b.d.CoachItemStuckEnd})))||void 0===n?void 0:n[0]},useCoachItemSendMessage_getStartedRecommendedAction=function(e){return null==e?void 0:e.find((function(e){return e.action===b.d.CoachItemLetsGetStarted}))},hooks_useCoachItemSendMessage=function(e){var n=e.authoringMode,t=e.courseraContext,i=e.endStateCallback,r=e.coachItemType,o=e.markItemComplete,s=t.courseId,c=t.itemId,d=Object(Oe.a)(),l=Object(ye.a)(n),u=a.useCallback((function(){d("interact_coach",{coachInteractionType:"end_chat_session",coachAction:r===Ie.e.SocraticDialogue?"COACH_ITEM_END_DIALOGUE":"COACH_ITEM_END_ROLE_PLAY",coach:{mode:l},product:{type:"course",id:s||""},courseItem:{id:c||""}})}),[s,c,l,d,r]),p=a.useCallback(function(){var e=g()(m()().mark((function _callee(e){var a,s,c,d,l,p,g,v;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(a="ACTIVE"===(null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.session.status),s="ENDED"===(null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.session.status),c=null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.recommendedActions,d=useCoachItemSendMessage_endOfCoachChatRecommendedAction(c),l=useCoachItemSendMessage_imStuckRecommendedAction(c),p=H.getState(),g=p.sessionState,v=g.chatSessionId,!d||!a){m.next=14;break}if(r!==Ie.e.SocraticDialogue){m.next=12;break}null==o||o(),m.next=14;break;case 12:return m.next=14,dispatcher_sendMessage(Object(ye.c)({message:d.actionMessage,action:d.action,chatSessionId:v,authoringMode:n,courseraContext:t}));case 14:s&&(u(),null==i||i()),toggleInputDisabled(!!l);case 16:case"end":return m.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[n,r,t,i,u,o]);return{sendMessage:a.useCallback(function(){var e=g()(m()().mark((function _callee2(e,a){var i,r,o,s;return m()().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,i=H.getState(),r=i.sessionState,o=r.chatSessionId,c.next=5,dispatcher_sendMessage(Object(ye.c)({message:e,action:a,chatSessionId:o,authoringMode:n,courseraContext:t}));case 5:return s=c.sent,c.next=8,p(s);case 8:return c.abrupt("return",s);case 11:c.prev=11,c.t0=c.catch(0),useCoachItemSendMessage_handleMessageResponseError(c.t0);case 14:case"end":return c.stop()}}),_callee2,null,[[0,11]])})));return function(n,t){return e.apply(this,arguments)}}(),[n,t,p])}},we=n("P1ex"),je=n.n(we),hooks_useUserChatSessions=function(){var e=Object(c.b)().id.toString(),n=Object(V.a)(),t=a.useState(!1),i=f()(t,2),r=i[0],o=i[1],s=a.useState(null),d=f()(s,2),l=d[0],u=d[1];return{getUserSessions:function(){var t=g()(m()().mark((function _callee(){var t,a,i,r,s,c,d,l,p;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=[],o(!0),m.prev=2,m.next=5,n.query({query:je.a,variables:{userId:e,limit:100},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 5:s=m.sent,null!==(a=s.data)&&void 0!==a&&null!==(i=a.AiCoach)&&void 0!==i&&null!==(r=i.queryChatSessionsByUserId)&&void 0!==r&&r.elements&&(t=null===(c=s.data)||void 0===c?void 0:null===(d=c.AiCoach)||void 0===d?void 0:null===(l=d.queryChatSessionsByUserId)||void 0===l?void 0:l.elements),o(!1),m.next=15;break;case 10:m.prev=10,m.t0=m.catch(2),p=m.t0,u(m.t0),Object(ye.b)({error:p,source:"useUserChatSessions"});case 15:return m.abrupt("return",t);case 16:case"end":return m.stop()}}),_callee,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),loading:r,error:l}},contexts_useDialogueCoachItemChat=function(e){var n=e.courseId,t=e.itemId,i=e.authoringMode,r=e.courseraContext,o=a.useState(void 0),s=f()(o,2),c=s[0],d=s[1],l=a.useState(null),u=f()(l,2),p=u[0],v=u[1],h=a.useState(!1),k=f()(h,2),C=k[0],S=k[1],y=void 0!==i,O=hooks_useUserChatSessions(),I=O.getUserSessions,w=O.error,j=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,mode:b.g.CoachItem})||{},x=j.refreshHistory,E=j.error,N=useStartNewChatSession_useStartNewChatSession({itemId:t,courseId:n,inAuthoringMode:y}),A=N.startNewChatSession,T=N.error,R=null;E||T||w?R={error:E||T||w,type:"API_FAIL"}:p&&(R={error:p,type:"NO_MESSAGES"});var M=C&&!R,P=a.useCallback(function(){var e=g()(m()().mark((function _callee(e,n){var t,a,o;return m()().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=H.getState(),a=t.sessionState,o=a.chatSessionId,s.prev=2,s.next=5,dispatcher_sendMessage(Object(ye.c)({message:e,action:n,chatSessionId:o,authoringMode:i,courseraContext:r}));case 5:return s.abrupt("return",s.sent);case 8:return s.prev=8,s.t0=s.catch(2),useCoachItemSendMessage_handleMessageResponseError(s.t0),s.abrupt("return",null);case 12:case"end":return s.stop()}}),_callee,null,[[2,8]])})));return function(n,t){return e.apply(this,arguments)}}(),[i,r]),F=a.useCallback(g()(m()().mark((function _callee2(){var e;return m()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!H.getState().behavior.messageLoader){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,A();case 5:return e=n.sent,d(e),n.next=9,P(ke.a,b.d.WelcomeMessage);case 9:case"end":return n.stop()}}),_callee2)}))),[P,A]),L=a.useCallback(g()(m()().mark((function _callee3(){var e,a,i,r,o,s,c,d;return m()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,I();case 2:if(i=l.sent,!w){l.next=5;break}return l.abrupt("return");case 5:if(r=null==i?void 0:null===(e=i.filter((function(e){return e.title===Object(ye.e)(n,t,y)})))||void 0===e?void 0:e[0],o=null==r?void 0:r.id){l.next=11;break}return l.next=10,F();case 10:return l.abrupt("return");case 11:return dispatcher_setChatSessionId(o),l.next=14,null==x?void 0:x(o);case 14:s=H.getState(),null!=(c=s.messages)&&null!==(a=c.messages)&&void 0!==a&&a.length||(d=new Error("No messages found in the chat history for the session ".concat(o)),Object(ye.b)({error:d,source:"loadingChatHistory"}),v(d),S(!1));case 16:case"end":return l.stop()}}),_callee3)}))),[w,n,x,I,y,t,S,F]),D=a.useCallback(g()(m()().mark((function _callee4(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,L();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(ye.b)({error:e.t0,source:"loadChatInternal"});case 9:S(!1);case 10:case"end":return e.stop()}}),_callee4,null,[[1,6]])}))),[L,S]);return{dialogueSessionId:c,error:R,startNewDialogueChat:F,loadChat:D,isLoading:M}},xe=n("IWWe"),SidePanelPersistenceUtils_getSidePanelState=function(e){if(e){var n=xe.a.getItem("sidePanelState",JSON.parse,{});return null==n?void 0:n[e]}},SidePanelPersistenceUtils_setSidePanelState=function(e,n,t){if(e&&n&&void 0!==t){var a=xe.a.getItem("sidePanelState",JSON.parse,{}),i=O()(O()({},a||{}),{},S()({},e,O()(O()({},(null==a?void 0:a[e])||{}),{},S()(S()({},n,t),"timestamp",(new Date).toISOString()))));xe.a.setItem("sidePanelState",i,JSON.stringify)}},SidePanelPersistenceUtils_clearSidePanelState=function(e){if(e){var n=xe.a.getItem("sidePanelState",JSON.parse,{});null==n||delete n[e];var t=new Date;t.setDate(t.getDate()-7),Object.keys(n||{}).forEach((function(e){var a=null==n?void 0:n[e];null!=a&&a.timestamp&&(new Date(a.timestamp)<t&&(null==n||delete n[e]))})),xe.a.setItem("sidePanelState",n,JSON.stringify)}},useRolePlayCoachItemChat_checkIfRolePlayEndedByUser=function(e){return!(!e||0===e.length)&&e.some((function(e){return"SYSTEM"===e.sender&&e.text===ke.q}))},contexts_useRolePlayCoachItemChat=function(e){var n=e.courseId,t=e.itemId,i=e.authoringMode,r=e.courseraContext,o=a.useState(!1),s=f()(o,2),c=s[0],d=s[1],l=a.useState(void 0),u=f()(l,2),p=u[0],v=u[1],h=a.useState(),k=f()(h,2),C=k[0],S=k[1],y=a.useState(),O=f()(y,2),I=O[0],w=O[1],j=a.useState(null),x=f()(j,2),E=x[0],N=x[1],A=a.useState(null),T=f()(A,2),R=T[0],M=T[1],P=a.useState(null),F=f()(P,2),L=F[0],D=F[1],B=a.useState(!1),V=f()(B,2),U=V[0],q=V[1],z=a.useState(!1),G=f()(z,2),W=G[0],Y=G[1],K=void 0!==i,Q=Object(ye.k)(n,t,K),J=hooks_useUserChatSessions(),X=J.getUserSessions,Z=J.error,ee=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,mode:b.g.CoachItem})||{},ne=ee.refreshHistory,te=ee.error,ae=useStartNewChatSession_useStartNewChatSession({itemId:t,courseId:n,inAuthoringMode:K}).startNewChatSession,ie=null;(te||Z)&&(ie={error:te||Z,type:"API_FAIL"});var re=U&&!ie,oe=a.useCallback(function(){var e=g()(m()().mark((function _callee(e,n){var t,a,o;return m()().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=H.getState(),a=t.sessionState,o=a.chatSessionId,s.abrupt("return",dispatcher_sendMessage(Object(ye.c)({message:e,action:n,chatSessionId:o,authoringMode:i,courseraContext:r})));case 3:case"end":return s.stop()}}),_callee)})));return function(n,t){return e.apply(this,arguments)}}(),[i,r]),se=a.useCallback(g()(m()().mark((function _callee2(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(ke.k,b.d.CoachItemGenerateScenario);case 2:return q(!1),d(!0),e.next=6,oe(ke.j,b.d.CoachItemGenerateJson);case 6:d(!1);case 7:case"end":return e.stop()}}),_callee2)}))),[oe,q]),ce=a.useCallback((function(){SidePanelPersistenceUtils_clearSidePanelState(C),v(void 0),S(void 0),w(void 0),dispatcher_setChatSessionId(void 0),N(null),M(null),D(null)}),[C]),de=a.useCallback(g()(m()().mark((function _callee3(){var e;return m()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!U&&!c){a.next=3;break}return a.abrupt("return");case 3:return q(!0),ce(),a.next=7,ae(Object(ye.k)(n,t,K));case 7:if(e=a.sent){a.next=10;break}throw new Error("Error creating Role Play intro session");case 10:return v(e),a.next=13,se();case 13:q(!1),a.next=21;break;case 16:a.prev=16,a.t0=a.catch(0),Object(ye.b)({error:a.t0,source:"startNewRolePlayChat"}),N(a.t0),q(!1);case 21:case"end":return a.stop()}}),_callee3,null,[[0,16]])}))),[U,c,ce,q,ae,n,t,K,se]),le=a.useCallback(g()(m()().mark((function _callee4(){var e,a;return m()().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,p){i.next=3;break}throw new Error("No intro session found for the Role Play");case 3:return e=Object(ye.l)(n,t,p,K),i.next=6,ae(e);case 6:if(a=i.sent){i.next=9;break}throw new Error("Error creating Role Play simulation session");case 9:return S(a),i.next=12,oe(ke.a,b.d.WelcomeMessage);case 12:return i.abrupt("return",a);case 15:return i.prev=15,i.t0=i.catch(0),Object(ye.b)({error:i.t0,source:"startRolePlaySimulation"}),M(i.t0),i.abrupt("return","");case 20:case"end":return i.stop()}}),_callee4,null,[[0,15]])}))),[p,n,t,K,ae,oe]),ue=a.useCallback(g()(m()().mark((function _callee5(){var e,a,i;return m()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,C){r.next=3;break}throw new Error("Error creating debrief session. Role Play simulation session id required.");case 3:return r.prev=3,r.next=6,null==ne?void 0:ne(C);case 6:e=r.sent,a=useRolePlayCoachItemChat_checkIfRolePlayEndedByUser(e||[]),Y(a),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),Object(ye.b)({error:r.t0,source:"createRolePlayDebrief_messageCheck"});case 14:return r.next=16,ae(Object(ye.i)(n,t,C,K));case 16:if(i=r.sent){r.next=19;break}throw new Error("Error creating Role Play debrief session");case 19:return w(i),r.next=22,oe(ke.h,b.d.CoachItemGenerateFeedback);case 22:r.next=28;break;case 24:r.prev=24,r.t1=r.catch(0),Object(ye.b)({error:r.t1,source:"createRolePlayDebrief"}),D(r.t1);case 28:case"end":return r.stop()}}),_callee5,null,[[0,24],[3,11]])}))),[K,n,t,C,oe,ae,ne,Y]),me=a.useCallback(g()(m()().mark((function _callee6(){var e,a,i,r,o,s,c,d,l,u;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,X();case 2:if(e=m.sent,!Z){m.next=5;break}return m.abrupt("return");case 5:if(a=e.find((function(e){return e.title===Q})),i=null==a?void 0:a.id){m.next=12;break}return m.next=10,de();case 10:m.next=33;break;case 12:return v(i),dispatcher_setChatSessionId(i),m.next=16,null==ne?void 0:ne(i);case 16:if(o=Object(ye.l)(n,t,i,K),!(s=null===(r=e.filter((function(e){return e.title===o})))||void 0===r?void 0:r[0])){m.next=33;break}return S(s.id),dispatcher_setChatSessionId(s.id),m.next=23,null==ne?void 0:ne(s.id);case 23:if(c=m.sent,d=useRolePlayCoachItemChat_checkIfRolePlayEndedByUser(c||[]),Y(d),l=Object(ye.i)(n,t,s.id,K),!(u=e.find((function(e){return e.title===l})))){m.next=33;break}return w(u.id),dispatcher_setChatSessionId(u.id),m.next=33,null==ne?void 0:ne(u.id);case 33:case"end":return m.stop()}}),_callee6)}))),[X,Z,Q,de,ne,n,t,K,Y]),pe=a.useCallback(g()(m()().mark((function _callee7(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,e.next=4,me();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(ye.b)({error:e.t0,source:"loadChatInternal"});case 9:q(!1);case 10:case"end":return e.stop()}}),_callee7,null,[[1,6]])}))),[me,q]);return{isRolePlayJSONLoading:c,rolePlayIntroSessionId:p,rolePlaySimulationSessionId:C,rolePlayDebriefSessionId:I,startNewRolePlayChat:de,startRolePlaySimulation:le,createRolePlayDebrief:ue,loadChat:pe,isLoading:re,rolePlayIntroCreationError:E,rolePlaySimulationCreationError:R,rolePlayDebriefCreationError:L,chatHistoryLoadingError:te,chatLoadingError:ie,setRolePlayDebriefCreationError:D,isRolePlayEndedByUser:W,setIsRolePlayEndedByUser:Y}},Ee=["children"],Ne=a.createContext(void 0),useCoachItemChatContext_CoachItemChatContextProvider=function(e){var n,t,i,r,o,s,c,d,u,p,v,k,C,S,y,O,I,w,j,x,E,N,A,T,R,M,P,F,L,D,B,V,U,q,z,G,W,Y,K,Q,J,X,Z,ee,ne,te=e.children,ae=l()(e,Ee),ie=(t=(n=ae).courseId,i=n.courseBranchId,r=n.coachItemType,o=n.rolePlayAiPersonaTitle,s=n.itemId,c=n.authoringMode,d=n.authoringCourseBranchId,u=n.itemName,p=n.nextItemLink,v=n.onCloseChat,k=n.markItemComplete,C=n.authorCoachItemSyncNotification,S=a.useState(!1),y=f()(S,2),O=y[0],I=y[1],w=Object(ye.h)({authoringCourseBranchId:d,authoringMode:c,courseBranchId:i,courseId:t,itemId:s}),j=a.useMemo((function(){return{coach:{mode:b.g.CoachItem},product:{type:"course",id:t},courseItem:{id:s}}}),[t,s]),x=contexts_useDialogueCoachItemChat({courseId:t,itemId:s,authoringMode:c,courseraContext:w}),E=x.dialogueSessionId,N=x.error,A=x.startNewDialogueChat,T=x.loadChat,R=x.isLoading,M=contexts_useRolePlayCoachItemChat({courseId:t,itemId:s,authoringMode:c,courseraContext:w}),P=M.isRolePlayJSONLoading,F=M.rolePlayIntroSessionId,L=M.rolePlaySimulationSessionId,D=M.rolePlayDebriefSessionId,B=M.startNewRolePlayChat,V=M.startRolePlaySimulation,U=M.createRolePlayDebrief,q=M.loadChat,z=M.isLoading,G=M.rolePlayIntroCreationError,W=M.rolePlaySimulationCreationError,Y=M.rolePlayDebriefCreationError,K=M.chatLoadingError,Q=M.setRolePlayDebriefCreationError,J=M.isRolePlayEndedByUser,X=hooks_useCoachItemSendMessage({authoringMode:c,courseraContext:w,endStateCallback:r===Ie.e.RolePlay?U:void 0,coachItemType:r,markItemComplete:k}).sendMessage,Z=a.useCallback(g()(m()().mark((function _callee(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r===Ie.e.RolePlay?B():A();case 1:case"end":return e.stop()}}),_callee)}))),[r,A,B]),ee=a.useCallback(g()(m()().mark((function _callee2(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==Ie.e.SocraticDialogue){e.next=5;break}return e.next=3,T();case 3:e.next=11;break;case 5:if(r!==Ie.e.RolePlay){e.next=10;break}return e.next=8,q();case 8:e.next=11;break;case 10:Object(ye.b)({error:new Error("Unknown coach item type: ".concat(r)),source:"loadChat"});case 11:case"end":return e.stop()}}),_callee2)}))),[r,T,q]),ne=a.useCallback((function(e){I(e),e||null==v||v()}),[v]),a.useMemo((function(){return{courseId:t,courseBranchId:i,itemId:s,coachItemType:r,rolePlayAiPersonaTitle:o,authoringMode:c,authoringCourseBranchId:d,trackingData:j,startNewChat:Z,startRolePlaySimulation:V,loadChat:ee,chatIsOpen:O,setChatIsOpen:ne,itemName:u,sendMessage:X,isDialogueLoading:R,dialogueError:N,isRolePlayJSONLoading:P,nextItemLink:p,dialogueSessionId:E,rolePlayIntroSessionId:F,rolePlaySimulationSessionId:L,rolePlayDebriefSessionId:D,authorCoachItemSyncNotification:C,rolePlayIntroCreationError:G,rolePlaySimulationCreationError:W,rolePlayDebriefCreationError:Y,setRolePlayDebriefCreationError:Q,rolePlayChatLoadingError:K,isRolePlayLoading:z,createRolePlayDebrief:U,isRolePlayEndedByUser:J}}),[t,i,s,r,o,c,d,j,Z,V,ee,O,ne,u,X,R,N,P,p,E,F,L,D,C,G,W,Y,Q,K,z,U,J]));return a.createElement(h.a,{store:H},a.createElement(Ne.Provider,{value:ie},te))},useCoachItemChatContext_useCoachItemChatContext=function(){var e=a.useContext(Ne);if(!e)throw new Error("useCoachItemChatContext must be used within a LearnerCoachItemContextProvider");return e},_e=n("/FeB"),Ae=n.n(_e),hooks_useCoachRespondToUserMessage=function(e){var n=e.itemId,t=e.courseId,i=e.courseBranchId,r=e.authoringCourseBranchId,o=e.authoringMode,s=Object(V.a)(),c=a.useState(!1),d=f()(c,2),l=d[0],u=d[1],p=a.useState(null),v=f()(p,2),h=v[0],b=v[1],k=Object(ye.h)({authoringCourseBranchId:r,authoringMode:o,courseBranchId:i,courseId:t,itemId:n});return{sendResponse:function(){var e=g()(m()().mark((function _callee(e){var n,t,a,i,r,o,c,d;return m()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=e.chatSessionId,t=e.message,a=e.config,u(!0),l.prev=2,l.next=5,s.mutate({mutation:Ae.a,variables:{input:{chatSessionId:n,message:t,courseraContext:k,config:a}},context:{clientName:"gatewayGql"}});case 5:if(null==(r=l.sent)||null===(i=r.data)||void 0===i||!i.AiCoach_RespondToUserMessage){l.next=9;break}return u(!1),l.abrupt("return",null===(o=r.data)||void 0===o?void 0:null===(c=o.AiCoach_RespondToUserMessage)||void 0===c?void 0:c.messageByAiCoach);case 9:l.next=16;break;case 11:l.prev=11,l.t0=l.catch(2),d=l.t0,b(l.t0),Object(ye.b)({error:d,source:"useCoachRespondToUserMessage"});case 16:return l.abrupt("return",void 0);case 17:case"end":return l.stop()}}),_callee,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}(),loading:l,error:h}},Te=["children"],Re=a.createContext(void 0),useRolePlayHintsContext_getRequestHintAction=function(e){return function(e){var n,t,a=2===e.length,i="text"===(null===(n=e[0])||void 0===n?void 0:n.type)&&e[0].text===ke.a,r=(null===(t=e[1])||void 0===t?void 0:t.sender)===T.c.RESPONSE;return a&&i&&r}(e)?ke.f:e.length>2?ke.m:""},useRolePlayHintsContext_RolePlayHintsContextProvider=function(e){var n=e.children,t=function(e){var n=e.courseId,t=e.courseBranchId,i=e.itemId,r=e.authoringCourseBranchId,o=a.useState(!1),s=f()(o,2),c=s[0],d=s[1],l=a.useState(!1),u=f()(l,2),p=u[0],v=u[1],k=a.useState(void 0),C=f()(k,2),S=C[0],y=C[1],O=a.useState(void 0),I=f()(O,2),w=I[0],j=I[1],x=a.useState({}),E=f()(x,2),N=E[0],T=E[1],R=useCoachItemChatContext_useCoachItemChatContext(),M=R.rolePlaySimulationSessionId,P=R.authoringMode,F=a.useCallback((function(e){T(e),M&&SidePanelPersistenceUtils_setSidePanelState(M,"expandedHintMessages",e)}),[M]),L=hooks_useUserChatSessions().getUserSessions,D=void 0!==P,B=hooks_useCreateUserChatSession({itemId:i,courseId:n,inAuthoringMode:D}),H=B.getNewChatSessionId,V=B.error,U=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,skipStore:!0,mode:b.g.CoachItem})||{},q=U.refreshHistory,z=U.error,G=hooks_useCoachRespondToUserMessage({itemId:i,courseId:n,authoringMode:P,courseBranchId:t,authoringCourseBranchId:r}),W=G.sendResponse,Y=G.error,K=Object(h.c)((function(e){return{messages:M&&e.messages.historicalMessagesMap[M]||e.messages.messages}})).messages,Q=null;V||Y?Q={error:V||Y,type:"API_FAIL"}:z&&(Q={error:z,type:"NO_MESSAGES"});var J,X=c&&!Q,Z=p&&!Q;M&&(J=Object(ye.j)(n,i,M,D));var ee=a.useCallback(g()(m()().mark((function _callee(){var e,n,t,a,i,r;return m()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,d(!0),e=A()(w||[]),n=S){o.next=9;break}return o.next=7,H(J);case 7:n=o.sent,y(n);case 9:if(t=useRolePlayHintsContext_getRequestHintAction(K)){o.next=13;break}throw d(!1),new Error("Something went wrong on determining the right hint action");case 13:return o.next=15,W({chatSessionId:n,message:ke.i,config:{coachActionId:t,coachModeId:ke.p}});case 15:if(!(a=o.sent)){o.next=21;break}return e=[].concat(A()(e),[{messageId:a.messageId,referencedMessageId:(null===(i=a.structuredResponse)||void 0===i?void 0:i.referencedMessageId)||"",message:(null===(r=a.structuredResponse)||void 0===r?void 0:r.hint)||""}]),j(e),d(!1),o.abrupt("return",e);case 21:d(!1),o.next=27;break;case 24:o.prev=24,o.t0=o.catch(0),Object(ye.b)({error:o.t0,source:"requestNewHint"});case 27:return o.abrupt("return",w||[]);case 28:case"end":return o.stop()}}),_callee,null,[[0,24]])}))),[K,w,S,W,H,J]),ne=a.useCallback(g()(m()().mark((function _callee2(){var e,n,t,a,i;return m()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L();case 2:if((n=r.sent)&&J){r.next=5;break}return r.abrupt("return",[]);case 5:if(t=n.find((function(e){return e.title===J})),a=null==t?void 0:t.id){r.next=9;break}return r.abrupt("return",[]);case 9:return y(a),v(!0),r.next=13,null==q?void 0:q(a);case 13:if(r.t1=e=r.sent,r.t0=null===r.t1,r.t0){r.next=17;break}r.t0=void 0===e;case 17:if(!r.t0){r.next=21;break}r.t2=void 0,r.next=22;break;case 21:r.t2=e.filter((function(e){return"SYSTEM"===e.sender})).map((function(e){return{messageId:e.id,referencedMessageId:e.structuredResponse.referencedMessageId,message:e.structuredResponse.hint,userFeedback:e.userFeedback}}));case 22:return i=r.t2,j(i),v(!1),r.abrupt("return",i);case 26:case"end":return r.stop()}}),_callee2)}))),[q,L,J]),te=a.useCallback((function(){j(void 0),y(void 0)}),[j,y]);return a.useMemo((function(){return{courseId:n,courseBranchId:t,itemId:i,requestNewHint:ee,loadHints:ne,isLoadingNewHint:X,isLoadingExistingHints:Z,error:Q,hints:w,expandedHintMessages:N,setExpandedHintMessages:F,resetHintsChatSession:te}}),[n,t,i,ee,ne,X,Z,Q,w,N,F,te])}(l()(e,Te));return a.createElement(Re.Provider,{value:t},n)},useRolePlayHintsContext_useRolePlayHintsContext=function(){var e=a.useContext(Re);if(!e)throw new Error("useRolePlayHintsContext must be used within a RolePlayHintsContext");return e},Me=["children"],Pe=a.createContext(void 0),useRolePlayTasksContext_getTaskListWithProgress=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n.reduce((function(e,n){return O()(O()({},e),{},S()({},n.id,n.completed))}),{});return(null==e?void 0:e.map((function(e){var n;return O()(O()({},e),{},{completed:null!==(n=a[e.id])&&void 0!==n?n:t})})))||[]},useRolePlayTasksContext_getTaskDetailsFromChatHistory=function(e){var n=e.filter((function(e){return"SYSTEM"===e.sender})).reduce((function(e,n){var t,a;return null!==(t=n.structuredResponse)&&void 0!==t&&t.taskList&&(e.taskList=n.structuredResponse.taskList),null!==(a=n.structuredResponse)&&void 0!==a&&a.taskProgress&&(e.taskProgress=n.structuredResponse.taskProgress),e}),{taskList:[],taskProgress:[]}),t=e.some((function(e){var n;return"SYSTEM"===e.sender&&(null===(n=e.structuredResponse)||void 0===n?void 0:n.taskProgress)}));return O()(O()({},n),{},{isTaskProgressRecorded:t})},useRolePlayTasksContext_RolePlayTasksContextProvider=function(e){var n=e.children,t=function(e){var n=e.courseId,t=e.courseBranchId,i=e.itemId,r=e.authoringCourseBranchId,o=a.useState(!1),s=f()(o,2),c=s[0],d=s[1],l=a.useState(void 0),u=f()(l,2),p=u[0],v=u[1],h=a.useState(!1),k=f()(h,2),C=k[0],S=k[1],y=a.useState(""),O=f()(y,2),I=O[0],w=O[1],j=useCoachItemChatContext_useCoachItemChatContext().authoringMode,x=hooks_useUserChatSessions().getUserSessions,E=void 0!==j,N=hooks_useCoachRespondToUserMessage({itemId:i,courseId:n,authoringCourseBranchId:r,authoringMode:j,courseBranchId:t}),A=N.sendResponse,T=N.loading,R=N.error,M=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,skipStore:!0,mode:b.g.CoachItem})||{},P=M.refreshHistory,F=M.error,L=hooks_useCreateUserChatSession({itemId:i,courseId:n,inAuthoringMode:E}),D=L.getNewChatSessionId,B=L.error,H=null;(B||R||F)&&(H={error:B||R||F,type:"API_FAIL"});var V=c&&!H,U=a.useCallback(function(){var e=g()(m()().mark((function _callee(e){var t,a;return m()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Object(ye.m)(n,i,e,E),r.next=3,D(t);case 3:return a=r.sent,w(a),r.abrupt("return",a);case 6:case"end":return r.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[n,i,D,E]),q=a.useCallback(function(){var e=g()(m()().mark((function _callee2(e){var n,t,a,i,r;return m()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return d(!0),o.next=3,U(e);case 3:return n=o.sent,w(n),o.next=7,A({chatSessionId:n,message:ke.l,config:{coachActionId:ke.u,coachModeId:ke.p}});case 7:if(!(t=o.sent)){o.next=14;break}return i=(null===(a=t.structuredResponse)||void 0===a?void 0:a.taskList)||[],r=useRolePlayTasksContext_getTaskListWithProgress(i,[]),v(r),d(!1),o.abrupt("return",r);case 14:return d(!1),o.abrupt("return",[]);case 16:case"end":return o.stop()}}),_callee2)})));return function(n){return e.apply(this,arguments)}}(),[A,U]),z=a.useCallback(function(){var e=g()(m()().mark((function _callee3(e,n){var t,a,i,r;return m()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,e){o.next=3;break}throw new Error("rolePlayTaskChatSessionId is required to request task tracking");case 3:if(!n.every((function(e){return e.completed}))){o.next=7;break}return v(n),o.abrupt("return",n);case 7:return o.next=9,A({chatSessionId:e,message:ke.l,config:{coachActionId:ke.v,coachModeId:ke.p}});case 9:if(!(t=o.sent)){o.next=15;break}return i=(null===(a=t.structuredResponse)||void 0===a?void 0:a.taskProgress)||[],r=useRolePlayTasksContext_getTaskListWithProgress(n,i,!0),v(r),o.abrupt("return",r);case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),Object(ye.b)({error:o.t0,source:"requestTaskTracking"});case 20:return o.abrupt("return",[]);case 21:case"end":return o.stop()}}),_callee3,null,[[0,17]])})));return function(n,t){return e.apply(this,arguments)}}(),[A]),G=a.useCallback((function(){d(!0),S(!0),v(void 0)}),[d,S,v]),W=a.useCallback((function(){w("")}),[w]),Y=a.useCallback(function(){var e=g()(m()().mark((function _callee4(e){var t,a,r,o,s,c,l,u,p,g;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(!C){m.next=2;break}return m.abrupt("return",[]);case 2:if(d(!0),t=Object(ye.m)(n,i,e,E),a=I){m.next=11;break}return m.next=8,x();case 8:r=m.sent,o=null==r?void 0:r.find((function(e){return e.title===t})),a=(null==o?void 0:o.id)||"";case 11:return w(a),m.next=14,null==P?void 0:P(a);case 14:if(m.t0=m.sent,m.t0){m.next=17;break}m.t0=[];case 17:return s=m.t0,c=useRolePlayTasksContext_getTaskDetailsFromChatHistory(s),l=c.taskList,u=c.taskProgress,p=c.isTaskProgressRecorded,g=useRolePlayTasksContext_getTaskListWithProgress(l,u,p),v(g),d(!1),m.abrupt("return",g);case 23:case"end":return m.stop()}}),_callee4)})));return function(n){return e.apply(this,arguments)}}(),[C,P,n,i,E,x,I]);return a.useMemo((function(){return{requestTaskList:q,requestTaskTracking:z,loadTaskList:Y,setShouldSkipChatHistory:S,handleInitialTaskLoad:G,isTaskListLoading:V,isTaskResponseLoading:T,error:H,tasks:p,taskChatSessionId:I,resetTaskChatSession:W}}),[p,I,q,z,Y,S,G,W,V,T,H])}(l()(e,Me));return a.createElement(Pe.Provider,{value:t},n)},useRolePlayTasksContext_useRolePlayTasksContext=function(){var e=a.useContext(Pe);if(!e)throw new Error("useRolePlayTasksContext must be used within a RolePlayTasksContext");return e},Fe=a.createContext(void 0),useSidePanelContext_useSidePanelContext=function(){var e=a.useContext(Fe);if(!e)throw new Error("useSidePanelContext must be used within a SidePanelProvider");return e},useSidePanelContext_SidePanelProvider=function(e){var n=e.children,t=a.useState("overview"),i=f()(t,2),r=i[0],o=i[1],s=a.useState("expanded"),c=f()(s,2),d=c[0],l=c[1],u=a.useCallback((function(e,n){o(e),SidePanelPersistenceUtils_setSidePanelState(n,"selectedPanel",e)}),[]),m=a.useCallback((function(e,n){l(e),SidePanelPersistenceUtils_setSidePanelState(n,"selectedPanelStatus",e)}),[]),p=a.useMemo((function(){return{selectedPanelStatus:d,setSelectedPanelStatus:m,selectedPanel:r,setSelectedPanel:u}}),[d,r,m,u]);return a.createElement(Fe.Provider,{value:p},n)},Le=n("VkAN"),De=n.n(Le),Be=n("OhL7"),He=n("FdHa"),Ve=n("6/Gu"),Ue=n("ZJgU"),qe=n("mHyk"),ze=n("l1rq"),Ge=n("loer"),We=n("RT5p"),Ye={instructions:Object(Be.c)(ee||(ee=De()(["\n    margin-bottom: var(--cds-spacing-600);\n  "]))),instructionsText:Object(Be.c)(ne||(ne=De()(["\n    margin-bottom: var(--cds-spacing-150);\n  "])))},components_LearnerOverview=function(e){var n=e.overviewInstructions,t=e.style,i=Object(ye.n)(n);return Object(Be.d)(Ve.a,{css:[Ye.instructions,t]},i?Object(Be.d)(Ge.a,{cml:We.c.create(n)}):n.split("\n\n").map((function(e,n){return Object(Be.d)(ze.a,{component:"p",key:"paragraph-".concat(n),css:Ye.instructionsText},e.split("\n").map((function(e,n,t){var i=n!==t.length-1;return Object(Be.d)(a.Fragment,{key:e},e,i&&(te||(te=Object(Be.d)("br",null))))})))})))},Ke=n("HulD"),Qe=n("TR2N"),Je=n.n(Qe),components_NonStandardPromptWarning=function(e){var n=e.promptVersion,t=e.coachItemType;return n!==Object(ye.d)(t)&&Object(c.d)()?a.createElement(Ve.a,{item:!0,css:{marginBottom:"var(--cds-spacing-300)"}},a.createElement(Ke.a,{severity:"information",title:Je()("Non-standard prompt in use")},Je()("It looks like you're using prompt version #{chosenPromptVersion}, when the standard prompt version is currently #{standardPromptVersion}.",{chosenPromptVersion:n,standardPromptVersion:ke.e}))):null},$e=n("vXr1"),Xe=n("Gok7"),Ze=n("A0dR"),en=n("gKW9"),nn=n.n(en),tn={completed:Object(Be.c)(ae||(ae=De()(["\n    "," {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n  "])),He.a.down("xs")),completedStateContainer:Object(Be.c)(ie||(ie=De()(["\n    display: flex;\n    padding: var(--cds-spacing-150);\n  "]))),completedIcon:Object(Be.c)(re||(re=De()(["\n    margin-right: var(--cds-spacing-50);\n  "]))),completedText:Object(Be.c)(oe||(oe=De()(["\n    margin-right: var(--cds-spacing-300);\n    margin-left: var(--cds-spacing-50);\n  "]))),nextItem:Object(Be.c)(se||(se=De()(["\n    "," {\n      margin-top: var(--cds-spacing-400);\n    }\n  "])),He.a.down("xs"))},chat_view_MarkAsCompleteButton=function(e){var n=e.isComplete,t=e.variant,a=void 0===t?"primary":t,i=e.className,r=e.disabled,o=e.nextItem,s=e.markComplete,c=Object($e.d)();return Object(Be.d)("div",{"data-testid":"mark-as-complete-container",className:i},n?Object(Be.d)(Ve.a,{container:!0,direction:"row","data-testid":"completed",css:tn.completed},Object(Be.d)(Ve.a,{item:!0,container:!0,alignItems:"center","data-testid":"completed-state",css:tn.completedStateContainer},Object(Be.d)(Ze.a,{size:"medium",color:"success","aria-hidden":!0,css:tn.completedIcon}),Object(Be.d)("div",{role:"alert","aria-live":"polite"},Object(Be.d)(ze.a,{variant:"subtitleMedium",color:"success",css:tn.completedText,component:"div"},Object(Be.d)(Xe.a,{component:"span",className:"rc-A11yScreenReaderOnly"},nn()("Item is completed.")),Object(Be.d)("span",{"aria-hidden":!0},nn()("Completed"))))),!!o&&Object(Be.d)(Ve.a,{item:!0},Object(Be.d)(qe.a,{"data-testid":"next-item",css:tn.nextItem,variant:"primary",type:"submit",onClick:function(){o&&c(o.getLink())},trackingData:{button:{name:"coach_item_navigate_to_next_item"}}},nn()("Go to next item")))):Object(Be.d)(qe.a,{"data-testid":"mark-complete",variant:a,type:"submit",disabled:r,onClick:s,trackingData:{button:{name:"coach_item_mark_complete"}}},nn()("Mark as complete")))},an={startButton:Object(Be.c)(ce||(ce=De()(["\n    margin-right: var(--cds-spacing-200);\n\n    "," {\n      margin-bottom: var(--cds-spacing-200);\n    }\n  "])),He.a.down("xs"))},components_CoverPage=function(e){var n=e.instructions,t=e.markComplete,a=e.markStarted,i=e.isCompleted,r=e.isStarted,o=e.promptVersion,s=(e.children,useCoachItemChatContext_useCoachItemChatContext()),c=s.loadChat,d=s.setChatIsOpen,l=s.courseId,u=s.itemId,m=s.coachItemType,p=Object(qe.e)(),g=function(e,n){return n?Je()("View feedback"):e?Je()("Continue Role Play"):Je()("Get started")}(r,i);return Object(Be.d)(Ve.a,null,Object(Be.d)(components_NonStandardPromptWarning,{promptVersion:o,coachItemType:m}),m===Ie.e.SocraticDialogue&&n&&Object(Be.d)(components_LearnerOverview,{overviewInstructions:n}),Object(Be.d)(Ve.a,{container:!0},Object(Be.d)(Ue.a,{variant:"primary",onClick:function(){p("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_START_CHAT_COVER_PAGE",coach:{mode:b.g.CoachItem},product:{type:"course",id:l},courseItem:{id:u,type:Object(ye.g)(m)}}),r||a(),c(),d(!0)},css:an.startButton,"data-testid":"coach-item-start-button"},m===Ie.e.SocraticDialogue?Je()("Open Dialogue"):g),Object(Be.d)(chat_view_MarkAsCompleteButton,{isComplete:i,variant:"secondary",disabled:!r,markComplete:t})))},rn=n("mIiF"),on=n("gksZ"),sn=n("sBcU"),cn=n("cE3W"),dn=n("SUk0"),ln=n("Z3v1"),un=n("lPk7"),mn=n("TSYQ"),pn=n.n(mn),gn=(Object(Be.c)(de||(de=De()(["\n    height: 100%;\n  "]))),Object(Be.c)(le||(le=De()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-background-primary);\n    }\n\n    .coach-message-client {\n      background-color: none;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),He.a.down("xs")),Object(Be.c)(ue||(ue=De()(["\n    flex-grow: 0;\n    border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n  "]))),Object(Be.c)(me||(me=De()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    position: relative;\n  "]))),Object(Be.c)(pe||(pe=De()(["\n    max-width: 770px;\n    margin: 0 auto;\n  "]))),Object(Be.c)(ge||(ge=De()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: 770px;\n    margin: 0 auto;\n    border-top: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n  "]))),Object(Be.c)(ve||(ve=De()(["\n    flex-grow: 0;\n    max-width: 770px;\n    margin: 0 auto;\n  "]))),n("DxU6")),vn=n.n(gn);Object(Be.c)(fe||(fe=De()(["\n      .hide-smart-scroll-container,\n      .show-smart-scroll-container,\n      .SmartScrollWrapper {\n        z-index: -1 !important;\n      }\n    "]))),Object(Be.c)(he||(he=De()(["\n    "," {\n      .ai-course-coach-widget {\n        overflow: hidden;\n      }\n\n      .show-smart-scroll-container {\n        z-index: -1 !important;\n      }\n    }\n  "])),He.a.down("xs")),Object(Be.c)(be||(be=De()(["\n    height: 100%;\n    border-radius: var(--cds-border-radius-200);\n    box-shadow: 0 4px 40px -8px rgb(0 0 0 / 40%), 0 4px 8px -8px rgb(0 0 0 / 40%);\n    overflow: hidden;\n  "])));var fn=n("L1vm"),hn=(n("zyGl"),n("Ji5S")),bn=n("5x5m");var kn,Cn,Sn=n("cVIm"),yn=n("fAYU");var On,components_Footer=function(e){var n=e.coachPersona;return Object(Be.d)(ze.a,{component:"p",variant:"bodySecondary",color:"supportText",css:Object(Be.c)(kn||(kn=De()(["\n        padding: var(--cds-spacing-200);\n      "])))},Object(Be.d)(ln.FormattedMessage,{message:vn()("{coachPersonaName} is powered by AI. Please be aware that the AI may make mistakes, so review responses carefully and do not share any sensitive information. Your data will be handled in accordance with {privacyNotice}."),privacyNotice:Object(Be.d)(yn.a,{href:"".concat(Sn.a.url.base,"about/privacy?trk_ref=coach"),target:"_blank",rel:"noreferrer",css:Object(Be.c)(Cn||(Cn=De()(["\n              color: inherit !important;\n            "])))},vn()("Coursera's Privacy Notice")),coachPersonaName:(null==n?void 0:n.name)||"Coach"}))},In=n("0F5w");function LoadingView(e){var n=e.labelMessage||vn()("Recalling our chat...");return Object(Be.d)("div",{css:Object(Be.c)(On||(On=De()(["\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        right: 50%;\n      "])))},Object(Be.d)(In.a,{label:n}))}var wn,jn,xn,En=n("dhC9"),Nn=7,_n=7999,An={textBox:function(e){return Object(Be.c)(wn||(wn=De()(["\n    /* CDS overrides */\n    --cds-color-neutral-background-primary-weak: var(--cds-color-emphasis-neutral-background-xweak);\n    --cds-color-interactive-stroke-primary-focus: var(--cds-color-emphasis-primary-background-xxstrong);\n    --cds-color-interactive-stroke-primary-focus-invert: var(--cds-color-emphasis-primary-background-weak);\n\n    > label {\n      margin-bottom: 0;\n\n      /* visually hidden but required for a11y */\n      display: none;\n    }\n\n    /* CDS overrides for Coach */\n\n    .cds-text-field-root {\n      /* textField component */\n      border-radius: var(--cds-spacing-100);\n      background-color: var(--cds-color-neutral-background-primary-weak);\n\n      /* remove border on the input field */\n\n      .cds-input-notchedOutline {\n        border: none;\n      }\n\n      /* text color */\n\n      .cds-input-input {\n        color: var(--cds-color-grey-700);\n      }\n\n      /* send suffix icon */\n\n      .cds-inputAdornment-filled {\n        padding: 0;\n        border-radius: var(--cds-spacing-100);\n\n        svg path {\n          fill: ",";\n        }\n      }\n\n      /* hover state */\n\n      &:hover {\n        .cds-input-notchedOutline {\n          border: 1px solid var(--cds-color-blue-600);\n        }\n      }\n\n      /* focus state */\n\n      &.cds-input-focused {\n        background-color: var(--cds-color-emphasis-neutral-background-xweak) !important;\n\n        .cds-input-notchedOutline {\n          border: 0 solid transparent;\n        }\n\n        .cds-input-input::placeholder {\n          color: var(--cds-color-interactive-secondary-inactive);\n        }\n\n        /* focus ring */\n\n        ::before {\n          border-radius: var(--cds-spacing-100);\n        }\n      }\n\n      /* send icon focus ring */\n\n      .cds-buttonBase-focusVisible {\n        &::after {\n          top: 4px;\n          left: 4px;\n          right: 4px;\n          bottom: 4px;\n        }\n      }\n\n      /* disabled state */\n\n      &.cds-input-readOnly {\n        .cds-input-input::placeholder {\n          color: var(--cds-color-grey-100);\n        }\n\n        svg path {\n          fill: var(--cds-color-grey-100);\n        }\n      }\n    }\n  "])),e?"var(--cds-color-neutral-disabled-strong)":"var(--cds-color-emphasis-neutral-background-xxstrong)")},container:Object(Be.c)(jn||(jn=De()(["\n    padding: 0 var(--cds-spacing-200);\n  "])))};function Sender(e){var n,t=e.sendMessage,i=e.placeholder,r=e.disabledInput,o=e.autofocus,s=e.onTextInputChange,c=Object(h.c)((function(e){return{showChat:e.behavior.showChat,inputText:e.input.inputText,isMessageLoading:e.behavior.messageLoader}})),d=c.showChat,l=c.inputText,u=c.isMessageLoading,m=Object(a.useRef)(null),p=Object(a.useRef)(null),g=Object(fn.c)(),v=Object(qe.e)(),f=null===(n=Object(dn.b)())||void 0===n?void 0:n.data;Object(a.useEffect)((function(){var e;d&&o&&(null===(e=m.current)||void 0===e||e.focus())}),[o,d]);var handleSendMessageClick=function(){l&&(t(l,b.d.TypedMessage),g({trackingData:{input_text:l,timestamp:Date.now()},trackingName:"ai_course_coach_chat_send_message",action:"click_send_message"}),f&&(v("interact_coach",O()(O()({coachInteractionType:"send_message",coach:{mode:f.mode}},f.courseId&&{product:{type:"course",id:f.courseId}}),f.itemId&&{courseItem:{id:f.itemId}})),v("send_coach_message",O()(O()({coachMessageText:l,coachMessageLength:l.length,coach:{mode:f.mode}},f.courseId&&{product:{type:"course",id:f.courseId}}),f.itemId&&{courseItem:{id:f.itemId}}))),H.dispatch(X.s("")))},handlePaste=function(e){var n,t=null==e?void 0:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/plain");t&&g({trackingData:{input_text:t,timestamp:Date.now()},trackingName:"ai_course_coach_chat_paste_message",action:"paste_message"})};Object(a.useEffect)((function(){var e=null;return m.current&&(e=m.current).addEventListener("paste",handlePaste),function(){e&&e.removeEventListener("paste",handlePaste)}}),[]);var k={onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessageClick())}};return Object(Be.d)("div",{ref:p,css:An.container},Object(Be.d)("div",{className:pn()("coach-new-message",{"coach-message-disable":u||r})},Object(Be.d)(En.a,{fullWidth:!0,multiline:!0,minRows:1,maxRows:Nn,maxLength:_n,label:vn()("Ask #{coachName}",{coachName:"Coach"}),type:"text",readOnly:u||r,inputRef:m,placeholder:i,onChange:function(e){var n=e.target.value;s&&s(n),function(e){H.dispatch(X.s(e))}(n)},value:l,inputProps:k,css:An.textBox(!l),"data-testid":"coach-send-message",suffix:Object(Be.d)(bn.d,{tooltip:vn()("Send message"),variant:"ghost",onClick:handleSendMessageClick,disabled:!l||u||r,"aria-label":vn()("Send message"),"data-testid":"coach-send-button",icon:xn||(xn=Object(Be.d)(hn.h,null))})})))}var Tn,Rn,Mn,Pn,Fn,Ln,Dn,Bn,Hn,Vn,Un,qn,zn,Gn,Wn,Yn,Kn,Qn,Jn,$n,Xn,Zn,et,nt,tt,at,it,rt,ot,st,ct,dt,lt,ut,mt,pt,gt,vt,ft,ht,bt,kt,Ct,St,yt,Ot,It,wt,jt,xt,Et,Nt,_t,At,Tt,Rt,Mt,Pt,Ft,Lt,Dt,Bt,Ht,Vt,Ut,qt,zt,Gt,Wt,Yt,Kt,Qt,Jt,$t,Xt,Zt,ea,na,ta,aa,ia,ra,oa,sa,ca,da,la,ua,ma,pa,ga,va,fa,ha,ba,ka,Ca,Sa,ya,Oa,Ia,wa,ja,xa,Ea,Na,_a,Aa,Ta,Ra,Ma,Pa,Fa,La,Da,Ba,Ha,Va,Ua,qa,za,Ga,Wa,Ya,Ka,Qa,Ja,$a,Xa,Za,ei,ni,ti,ai,ii,ri,oi=Object(a.forwardRef)(Sender),si=n("eX5Y"),ci={actions:Object(Be.c)(Tn||(Tn=De()(["\n    margin: 0 var(--cds-spacing-200);\n    display: flex;\n    gap: var(--cds-spacing-150);\n\n    "," {\n      flex-direction: column;\n\n      button {\n        width: 100%;\n        max-width: unset;\n      }\n    }\n  "])),He.a.down("sm"))},chat_view_ChatCompleteActions=function(e){var n=e.chatHasEnded,t=e.onTryAgainClick,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.coachItemType,o=i.startNewChat,s=i.nextItemLink,c=i.authoringMode,d=i.courseId,l=i.itemId,u=i.setChatIsOpen,m=i.isRolePlayEndedByUser,p=Object(h.c)((function(e){return e.sessionState.chatState})),g=Object(qe.e)(),v=Object($e.d)(),navigateToNextItem=function(){s&&v(s)},onStartNewChatButtonClick=function(e){e&&g("interact_coach",{coachInteractionType:"click_action",coachAction:e,coach:{mode:b.g.CoachItem},product:{type:"course",id:d},courseItem:{id:l}}),o(),null==t||t()};return p===b.f.ChatLimitReached?Object(Be.d)("div",{css:ci.actions},Object(Be.d)(Ue.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_CHAT_LIMIT_REACHED_START_CHAT_INLINE")}},r===Ie.e.RolePlay?Je()("Start a new session"):Je()("Start a new chat"))):p===b.f.Ended||n?c?Object(Be.d)("div",{css:ci.actions},Object(Be.d)(Ue.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_SESSION_END_START_CHAT_INLINE")}},r===Ie.e.RolePlay?Je()("Start a new session"):Je()("Start a new chat"))):Object(Be.d)("div",{css:ci.actions,"data-testid":"chat-end-buttons"},r===Ie.e.RolePlay&&Object(Be.d)(qe.a,{onClick:function(){m?onStartNewChatButtonClick("COACH_ITEM_SESSION_END_START_CHAT_INLINE"):navigateToNextItem()},trackingData:{button:{name:m?"coach_item_start_new_chat_try_again":"coach_item_go_to_next_item"}}},m?Je()("Try again"):Je()("Go to next item")),r===Ie.e.SocraticDialogue&&Object(Be.d)(a.Fragment,null,s?Object(Be.d)(qe.a,{onClick:navigateToNextItem,variant:"primary",trackingData:{button:{name:"coach_item_navigate_to_next_item_inline"}}},Je()("Go to next item")):Object(Be.d)(qe.a,{trackingData:{button:{name:"coach_item_close_chat_inline"}},onClick:function(){return u(!1)},variant:"primary"},Je()("Close chat"))),Object(Be.d)(qe.a,{variant:"ghost","data-pendo":r===Ie.e.RolePlay?ke.r:ke.o,trackingData:{button:{name:"coach_item_provide_feedback_inline"}}},Je()("Tell us what you think"))):null},di=Object(Be.c)(Rn||(Rn=De()(["\n  margin-bottom: var(--cds-spacing-300);\n\n  > p {\n    margin-bottom: var(--cds-spacing-200);\n    text-align: center;\n    color: var(--cds-color-neutral-primary-weak);\n  }\n"]))),chat_view_ChatEndedMessage=function(){var e=function(e){switch(e){case b.f.Ended:return Je()("The activity has ended.");case b.f.ChatLimitReached:return Je()("You’ve reached the chat limit.");default:return}}(Object(h.c)((function(e){return e.sessionState.chatState})));return e?Object(Be.d)("div",{"data-testid":"chat-ended-message",css:di},Object(Be.d)(ze.a,{component:"p"},e),Object(Be.d)(ze.a,{component:"p"},Je()("Start a new chat to clear your chat history and start fresh."))):null},li=n("2yix"),ui={loadingContainer:Object(Be.c)(Mn||(Mn=De()(["\n    user-select: none; /* needed to prevent cursor from appearing as caret when clicked */\n    margin: 0 var(--cds-spacing-200);\n  "]))),senderContainer:Object(Be.c)(Pn||(Pn=De()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: ",";\n    margin: 0 auto;\n  "])),ke.b+"px"),chatActionContainer:Object(Be.c)(Fn||(Fn=De()(["\n    max-width: ",";\n    margin: var(--cds-spacing-200) auto 0;\n    flex-grow: 0;\n    width: 100%;\n  "])),ke.b+"px"),startActionButton:Object(Be.c)(Ln||(Ln=De()(["\n    margin-left: var(--cds-spacing-200);\n  "]))),coachButton:Object(Be.c)(Dn||(Dn=De()(["\n    margin-left: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "])))},chat_view_DialogueChatActions=function(e){var n=e.onClickEndDialogueButton,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.dialogueError,i=t.isDialogueLoading,r=t.sendMessage,o=Object(h.c)((function(e){return e.sessionState})).chatState,s=Object(h.c)((function(e){var n=e.behavior;return{messages:e.messages,behavior:n,sessionState:e.sessionState}})),c=s.behavior,d=c.disabledInput,l=c.messageLoader,u=s.messages.messages,p=null==u?void 0:u[u.length-1],v=!!useCoachItemSendMessage_endOfCoachChatRecommendedAction(null==p?void 0:p.recommendedActions),f=o===b.f.Active,k=!useCoachItemSendMessage_getStartedRecommendedAction(null==p?void 0:p.recommendedActions),C=v&&f,S=function(){var e=g()(m()().mark((function _callee(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(ke.g,b.d.CoachItemSummary);case 2:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return a?null:i?Object(Be.d)("div",{css:ui.chatActionContainer},Object(Be.d)(li.a,{variant:"rect",height:48,css:ui.loadingContainer})):C?Object(Be.d)("div",{"data-testid":"view-feedback-button",css:ui.chatActionContainer},Object(Be.d)(qe.a,{size:"medium",variant:"primary",onClick:S,css:ui.startActionButton,disabled:l,trackingData:{button:{name:"dialogue_item_view_your_feedback"}}},Je()("View your Feedback"))):k&&f?Object(Be.d)("div",{css:ui.senderContainer},Object(Be.d)(oi,{sendMessage:r,placeholder:Je()("Message Coach"),disabledInput:d||!f,autofocus:!0}),Object(Be.d)(bn.b,{size:"small",variant:"secondary",onClick:n,css:ui.coachButton,disabled:l},Je()("End Dialogue"))):null},mi=n("7NTc"),pi=n("rzCt"),gi=n("fguj"),vi=n("7NrJ"),fi=mi.a.HeadingGroup,hi=mi.a.Content,bi=mi.a.Actions,ki={introductoryText:Object(Be.c)(Bn||(Bn=De()(["\n    margin-bottom: var(--cds-spacing-200);\n  "]))),actionButtons:Object(Be.c)(Hn||(Hn=De()(["\n    padding-left: 0;\n  "])))},Ci=function(e){return e.DEFAULT="DEFAULT",e.FEEL_STUCK="FEEL_STUCK",e.TECHNICAL_ISSUES="TECHNICAL_ISSUES",e.TIME_CONSTRAINT="TIME_CONSTRAINT",e.NOT_VALUABLE="NOT_VALUABLE",e.DISLIKE_ITEM_TYPE="DISLIKE_ITEM_TYPE",e}({}),chat_view_EndDialogueDialog=function(e){var n=e.onClose,t=e.isOpen,i=a.useState(Ci.DEFAULT),r=f()(i,2),o=r[0],s=r[1],c=useCoachItemChatContext_useCoachItemChatContext().sendMessage,d=Object(qe.e)();return Object(Be.d)(mi.a,{open:t,onClose:n},Object(Be.d)(fi,null,Je()("Would you like to end this session?")),Object(Be.d)(hi,null,Object(Be.d)(ze.a,{css:ki.introductoryText,component:"p"},Je()("Please note that you will not be able to resume it, but you can always start a new one from the beginning.")),Object(Be.d)(pi.a,{label:Je()("Reason for ending"),optional:!0,"data-testid":"end-dialogue-reason-select-field",placeholder:Je()("Select a reason"),supportText:Je()("We would appreciate your feedback to help us improve the experience."),onChange:function(e){var n=e.target.value;s(n)}},Object.values(Ci).map((function(e){return Object(Be.d)(gi.a,{key:e,value:e},function(e){switch(e){case Ci.FEEL_STUCK:return Je()("I feel stuck and can't complete the activity");case Ci.TECHNICAL_ISSUES:return Je()("I'm experiencing technical issues");case Ci.TIME_CONSTRAINT:return Je()("I don't have time to finish");case Ci.NOT_VALUABLE:return Je()("This isn't engaging or valuable for me");case Ci.DISLIKE_ITEM_TYPE:return Je()("I'd prefer a different way to learn");case Ci.DEFAULT:default:return Je()("No reason provided")}}(e))}))),Object(Be.d)(bi,{css:ki.actionButtons},Object(Be.d)(vi.a,{alternateButtonProps:{children:Je()("Cancel"),variant:"secondary",onClick:n},primaryButtonProps:{children:Je()("Yes, end the Dialogue"),onClick:function(){c("Generate final session summary",b.d.CoachItemStuckEnd),d("end_coach_item_session",{coachItemSessionEndReason:o,courseItem:{type:"dialogue"}}),n()}}}))))},Si={root:Object(Be.c)(Vn||(Vn=De()(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n  "])))},chat_view_ErrorView=function(e){var n=e.error,t=a.useCallback((function(){return"NO_MESSAGES"===n.type?Je()("Something went wrong in getting your previous chat. Please contact support for help, or start a new chat."):Je()("Please refresh your page. If you continue to see this error, please contact support for help.")}),[n]);return Object(Be.d)(ze.a,{component:"div",css:Si.root},t())},yi={conversation:Object(Be.c)(Un||(Un=De()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-background-primary);\n    }\n\n    .coach-message-client {\n      background-color: unset;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),He.a.down("xs")),messageContainer:Object(Be.c)(qn||(qn=De()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    height: 100%;\n    position: relative;\n  "]))),messageContainerResponses:Object(Be.c)(zn||(zn=De()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),ke.b+"px"),summarySectionDivider:Object(Be.c)(Gn||(Gn=De()(["\n    margin: var(--cds-spacing-200);\n    margin-bottom: var(--cds-spacing-400);\n  "]))),userHasLeftMessage:Object(Be.c)(Wn||(Wn=De()(["\n    padding: 0 var(--cds-spacing-200);\n    padding-bottom: var(--cds-spacing-200);\n  "]))),endStateContainer:Object(Be.c)(Yn||(Yn=De()(["\n    margin: 0 auto var(--cds-spacing-200);\n    width: 100%;\n  "]))),footerContainer:Object(Be.c)(Kn||(Kn=De()(["\n    flex-grow: 0;\n    width: 100%;\n    margin: 0 auto;\n    max-width: ",";\n  "])),ke.b+"px")},chat_view_ChatConversation=function(){var e,n=useCoachItemChatContext_useCoachItemChatContext(),t=n.courseId,i=n.isDialogueLoading,r=n.dialogueError,o=n.sendMessage,s=n.dialogueSessionId,d=n.authorCoachItemSyncNotification,l=n.courseBranchId,u=a.useState(!1),m=f()(u,2),p=m[0],g=m[1],v=Object(h.c)((function(e){return{messages:e.messages,shouldShowMessageLoader:e.behavior.messageLoader}})).messages.messages,k=null==v?void 0:v.find((function(e){return e.text===ke.g})),C=null==v?void 0:v[v.length-1],S=v.find((function(e){return useCoachItemSendMessage_endOfCoachChatRecommendedAction(null==e?void 0:e.recommendedActions)})),y=null===(e=Object(dn.b)())||void 0===e?void 0:e.data,I=Object(qe.f)("view_dialogue_messages",O()(O()({product:{type:"course",id:t}},(null==y?void 0:y.itemId)&&{courseItem:{id:null==y?void 0:y.itemId}}),l&&{courseBranch:{id:l}}),[t,null==y?void 0:y.itemId,l]),w=Object(c.b)().fullName,j=Object(si.a)(w),x=a.useRef(null);a.useEffect((function(){var e,n;k&&x.current&&(null===(e=(n=x.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[k]);var isSummaryMessage=function(e){return k&&e.customId!==k.customId&&e.customId===C.customId},onSendMessage=function(e,n){e.trim()&&o(e,n)},handleToggleEndDialogueDialog=function(){g(!p)};return Object(Be.d)("div",{css:yi.conversation},Object(Be.d)("div",{css:yi.messageContainer},i&&Object(Be.d)(LoadingView,{labelMessage:Je()("Loading...")}),r&&Object(Be.d)(chat_view_ErrorView,{error:r}),Object(Be.d)("div",{css:yi.messageContainerResponses},!i&&!r&&Object(Be.d)("div",{ref:I},Object(Be.d)(R.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:onSendMessage,courseId:t,hideMessage:function(e){var n=e.message;return!(0!==e.index&&n.action!==b.d.CoachItemSummary&&(null==n?void 0:n.text)!==ke.g&&n.action!==b.d.CoachItemStuckEnd&&!isSummaryMessage(n))},chatSessionId:s,forceHideMessageLoader:!!k}),k&&Object(Be.d)("div",{ref:x},S?Object(Be.d)(un.a,{css:yi.summarySectionDivider,"data-testid":"summary-section-divider"}):Object(Be.d)(ze.a,{component:"p",variant:"bodyPrimary",color:"supportText",css:yi.userHasLeftMessage},Object(Be.d)(ln.FormattedMessage,{message:Je()("{userFirstName} ended the dialogue."),userFirstName:j})),Object(Be.d)(R.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:onSendMessage,courseId:t,hideMessage:function(e){var n=e.message;return!isSummaryMessage(n)},chatSessionId:s})),Object(Be.d)("div",{css:yi.endStateContainer},Qn||(Qn=Object(Be.d)(chat_view_ChatEndedMessage,null)),Jn||(Jn=Object(Be.d)(chat_view_ChatCompleteActions,null)))))),d&&d,Object(Be.d)(chat_view_EndDialogueDialog,{onClose:handleToggleEndDialogueDialog,isOpen:p}),$n||($n=Object(Be.d)(un.a,{color:"light",orientation:"horizontal"})),Object(Be.d)(chat_view_DialogueChatActions,{onClickEndDialogueButton:handleToggleEndDialogueDialog}),Object(Be.d)("div",{css:yi.footerContainer},Xn||(Xn=Object(Be.d)(components_Footer,null))))},Oi={startActionButton:Object(Be.c)(Zn||(Zn=De()(["\n    margin-left: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatLearnerStartScenario=function(e){var n=e.onStartButtonClick,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.isRolePlayJSONLoading,i=t.startRolePlaySimulation,r=t.trackingData,o=useRolePlayTasksContext_useRolePlayTasksContext(),s=o.requestTaskList,c=o.handleInitialTaskLoad,d=Object(qe.e)(),l=function(){var e=g()(m()().mark((function _callee(){var e;return m()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d("interact_coach",O()({coachInteractionType:"click_action",coachAction:b.d.CoachItemGenerateScenario},r)),t.next=3,i();case 3:if(!(e=t.sent)){t.next=9;break}return null==n||n(e),c(),t.next=9,s(e);case 9:case"end":return t.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return Object(Be.d)(Ue.a,{onClick:l,size:"medium",variant:"primary",loading:a,css:Oi.startActionButton},Je()("Start Role Play"))},chat_view_RolePlayChatSender=function(e){var n=e.coachPersona,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.rolePlayIntroSessionId,i=t.sendMessage,r=Object(h.c)((function(e){return e.sessionState})).chatSessionId,o=useRolePlayTasksContext_useRolePlayTasksContext(),s=o.taskChatSessionId,c=o.tasks,d=o.requestTaskTracking,l=Object(h.c)((function(e){return e.behavior})).disabledInput,u=function(){var e=g()(m()().mark((function _callee(e,n){return m()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e,n);case 2:if(null==c||!c.length){t.next=5;break}return t.next=5,d(s,c);case 5:case"end":return t.stop()}}),_callee)})));return function(n,t){return e.apply(this,arguments)}}();return Object(Be.d)(oi,{sendMessage:u,placeholder:Je()("Message #{coachPersonaName}",{coachPersonaName:(null==n?void 0:n.name)||"Coach"}),disabledInput:l||r===a,autofocus:!0})},Ii={loadingContainer:Object(Be.c)(et||(et=De()(["\n    user-select: none; /* needed to prevent cursor from appearing as caret when clicked */\n    margin: 0 var(--cds-spacing-200);\n  "]))),senderContainer:Object(Be.c)(nt||(nt=De()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: ",";\n    margin: 0 auto;\n  "])),ke.b+"px"),chatActionContainer:Object(Be.c)(tt||(tt=De()(["\n    max-width: ",";\n    margin: var(--cds-spacing-200) auto 0;\n    flex-grow: 0;\n    width: 100%;\n  "])),ke.b+"px"),startActionButton:Object(Be.c)(at||(at=De()(["\n    margin-left: var(--cds-spacing-200);\n  "]))),coachButton:Object(Be.c)(it||(it=De()(["\n    margin-left: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatActions=function(e){var n=e.coachPersona,t=e.onStartButtonClick,a=e.onTryAgainClick,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.rolePlayChatLoadingError,o=i.isRolePlayLoading,s=i.rolePlaySimulationSessionId,c=i.rolePlayDebriefSessionId,d=i.rolePlayDebriefCreationError,l=i.rolePlaySimulationCreationError,u=i.rolePlayIntroCreationError,p=i.startRolePlaySimulation,v=i.isRolePlayJSONLoading,f=i.authoringMode,k=i.trackingData,C=Object(h.c)((function(e){return e.sessionState})),S=C.chatState,y=C.chatSessionId,I=Object(h.c)((function(e){return e.behavior})).messageLoader,w=useRolePlayTasksContext_useRolePlayTasksContext().requestTaskList,j=Object(qe.e)(),x=y===c,E=S===b.f.Active,N=E&&!!s&&!x,A=E&&!s,T=!f,R=r||u||l||d,M=function(){var e=g()(m()().mark((function _callee(){var e;return m()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return j("interact_coach",O()({coachInteractionType:"click_action",coachAction:b.d.CoachItemGenerateScenario},k)),n.next=3,p();case 3:if(!(e=n.sent)){n.next=8;break}return null==t||t(e),n.next=8,w(e);case 8:case"end":return n.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return R?null:o?Object(Be.d)("div",{css:Ii.chatActionContainer},Object(Be.d)(li.a,{variant:"rect",height:48,css:Ii.loadingContainer})):A?Object(Be.d)("div",{css:Ii.chatActionContainer,"data-testid":"chat-start-button"},T?Object(Be.d)(chat_view_RolePlayChatLearnerStartScenario,{onStartButtonClick:t}):Object(Be.d)(Ue.a,{onClick:M,size:"medium",variant:"primary",loading:v,css:Ii.startActionButton},Je()("Start Role Play"))):N?Object(Be.d)("div",{css:Ii.senderContainer},Object(Be.d)(chat_view_RolePlayChatSender,{coachPersona:n})):c?Object(Be.d)("div",{css:Ii.chatActionContainer},I?rt||(rt=Object(Be.d)(li.a,{variant:"rect",height:48})):Object(Be.d)(chat_view_ChatCompleteActions,{chatHasEnded:!0,onTryAgainClick:a})):null},wi=n("nNSt"),ji={sessionTitle:Object(Be.c)(ot||(ot=De()(["\n    margin: var(--cds-spacing-600) 0;\n    padding-left: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatSession=function(e){var n=e.title,t=e.children;return Object(Be.d)("div",null,Object(Be.d)("div",{css:ji.sessionTitle},Object(Be.d)(ze.a,{component:"h2",variant:"titleSmall"},n)),Object(Be.d)("div",null,t))},xi={messageContainerResponses:Object(Be.c)(st||(st=De()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),ke.b+"px"),notification:Object(Be.c)(ct||(ct=De()(["\n    margin-bottom: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayDebriefSession=function(e){var n=e.hideMessage,t=useCoachItemChatContext_useCoachItemChatContext(),i=t.courseId,r=t.rolePlayDebriefCreationError,o=t.rolePlayDebriefSessionId,s=t.startNewChat,c=t.sendMessage,d=t.createRolePlayDebrief,l=t.setRolePlayDebriefCreationError,u=t.trackingData,p=Object(qe.e)(),v=a.useState(!0),h=f()(v,2),b=h[0],k=h[1],C=a.useRef(null);a.useEffect((function(){var e,n;C.current&&(null===(e=(n=C.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[o,r]);var S=function(){var e=g()(m()().mark((function _callee(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("interact_coach",O()(O()({},u),{},{coachInteractionType:"click_action",coachAction:"COACH_ITEM_DEBRIEF_REGENERATE_FEEDBACK"})),l(null),k(!1),e.next=5,d();case 5:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}(),handleStartNewChatClick=function(){p("interact_coach",O()(O()({},u),{},{coachInteractionType:"click_action",coachAction:"COACH_ITEM_DEBRIEF_ERROR_START_NEW_CHAT"})),s()};return r?Object(Be.d)(a.Fragment,null,Object(Be.d)("div",{ref:C,css:xi.messageContainerResponses},Object(Be.d)(chat_view_RolePlayChatSession,{title:Je()("Feedback session")},b?Object(Be.d)(wi.a,{css:xi.notification,severity:"error",actions:Object(Be.d)(vi.a,{size:"small",primaryButtonProps:{children:"Regenerate response",onClick:S},alternateButtonProps:{variant:"ghost",children:"Start a new session",onClick:handleStartNewChatClick}})},Je()("Something went wrong. Try regenerating the response, or start a new session.")):Object(Be.d)(wi.a,{css:xi.notification,severity:"error",actions:Object(Be.d)(Ue.a,{size:"small",onClick:handleStartNewChatClick},Je()("Start a new session"))},Je()("Something went wrong. Start a new session to try again"))))):o?Object(Be.d)(a.Fragment,null,Object(Be.d)("div",{ref:C,css:xi.messageContainerResponses},Object(Be.d)(chat_view_RolePlayChatSession,{title:Je()("Feedback session")},Object(Be.d)(R.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:c,courseId:i,hideMessage:n,chatSessionId:o})))):null},Ei={messageContainerResponses:Object(Be.c)(dt||(dt=De()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),ke.b+"px")},chat_view_RolePlayIntroSession=function(e){var n=e.hideMessage,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.courseId,i=t.trackingData,r=t.rolePlayIntroSessionId,o=t.rolePlayIntroCreationError,s=t.startNewChat,c=t.sendMessage,d=Object(qe.e)();return o?Object(Be.d)("div",{css:Ei.messageContainerResponses},Object(Be.d)(chat_view_RolePlayChatSession,{title:Je()("Scenario overview")},Object(Be.d)(wi.a,{severity:"error",actions:Object(Be.d)(Ue.a,{size:"small",onClick:function(){d("interact_coach",O()({coachInteractionType:"click_action",coachAction:"COACH_ITEM_INTRO_ERROR_START_NEW_CHAT"},i)),s()}},Je()("Start a new session"))},Je()("Something went wrong. Start a new session to try again")))):r?Object(Be.d)("div",{css:Ei.messageContainerResponses},Object(Be.d)(chat_view_RolePlayChatSession,{title:Je()("Scenario overview")},Object(Be.d)(R.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:function(e,n){e.trim()&&c(e,n)},courseId:a,hideMessage:n,chatSessionId:r,forceHideMessageLoader:!0}))):null},Ni={container:Object(Be.c)(lt||(lt=De()(["\n    margin: 0 var(--cds-spacing-200);\n  "]))),divider:Object(Be.c)(ut||(ut=De()(["\n    margin: var(--cds-spacing-600) 0;\n  "])))},chat_view_RolePlayEndState=function(){var e=useCoachItemChatContext_useCoachItemChatContext(),n=e.rolePlayAiPersonaTitle,t=e.rolePlayDebriefSessionId,a=Object(h.c)((function(e){return e.sessionState})),i=a.chatState,r=a.chatSessionId;return i===b.f.Ended||t&&t===r?Object(Be.d)("div",{css:Ni.container},Object(Be.d)(un.a,{color:"light",orientation:"horizontal",css:Ni.divider}),Object(Be.d)(ze.a,{component:"p",color:"supportText"},Je()("#{aiPersonaRole} has left. The Role Play activity has ended.",{aiPersonaRole:n})),Object(Be.d)(un.a,{color:"light",orientation:"horizontal",css:Ni.divider})):null},_i={endStateContainer:Object(Be.c)(mt||(mt=De()(["\n    margin: 0 auto;\n    width: 100%;\n  "]))),divider:Object(Be.c)(pt||(pt=De()(["\n    margin: var(--cds-spacing-600) 0;\n  "]))),messageContainerResponses:Object(Be.c)(gt||(gt=De()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),ke.b+"px")},chat_view_RolePlaySimulationSession=function(e){var n=e.coachPersona,t=e.hideMessage,i=e.isRolePlayTaskResponseLoading,r=useCoachItemChatContext_useCoachItemChatContext(),o=r.courseId,s=r.trackingData,c=r.rolePlaySimulationSessionId,d=r.rolePlaySimulationCreationError,l=r.startNewChat,u=r.sendMessage,m=Object(qe.e)();return d?Object(Be.d)(a.Fragment,null,Object(Be.d)("div",{css:_i.messageContainerResponses},Object(Be.d)(un.a,{css:_i.divider,color:"light",orientation:"horizontal"}),Object(Be.d)(chat_view_RolePlayChatSession,{title:Je()("Role Play simulation")},Object(Be.d)(wi.a,{severity:"error",actions:Object(Be.d)(Ue.a,{size:"small",onClick:function(){m("interact_coach",O()({coachInteractionType:"click_action",coachAction:"COACH_ITEM_SIMULATION_ERROR_START_NEW_CHAT"},s)),l()}},Je()("Start a new session"))},Je()("Something went wrong. Start a new session to try again"))))):c?Object(Be.d)("div",{css:_i.messageContainerResponses,"data-testid":"role-play-simulation-session"},Object(Be.d)(un.a,{css:_i.divider,color:"light",orientation:"horizontal"}),Object(Be.d)(chat_view_RolePlayChatSession,{title:Je()("Role Play simulation")},Object(Be.d)(R.g,{profileClientAvatar:void 0,coachPersona:n,homeView:void 0,sendMessage:function(e,n){e.trim()&&u(e,n)},courseId:o,hideMessage:t,chatSessionId:c,forceShowMessageLoader:i}),Object(Be.d)("div",{css:_i.endStateContainer},vt||(vt=Object(Be.d)(chat_view_RolePlayEndState,null))))):null},Ai={messageContainer:Object(Be.c)(ft||(ft=De()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    height: 100%;\n    position: relative;\n  "]))),messageContainerResponses:Object(Be.c)(ht||(ht=De()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),ke.b+"px")},chat_view_RolePlayChatSessions=function(e){var n=e.coachPersona,t=e.isTaskResponseLoading,a=useCoachItemChatContext_useCoachItemChatContext(),i=a.isRolePlayLoading,r=a.rolePlayChatLoadingError,hideMessage=function(e){var n,a=e.message,i=e.index,r=e.messages;return!!(0===i||a.action===b.d.CoachItemSummary||"Generate final session summary"===(null==a?void 0:a.text)||a.action===b.d.CoachItemGenerateScenario||(null==a?void 0:a.text)===ke.k||a.action===b.d.CoachItemGenerateJson||(null==a?void 0:a.text)===ke.j||r[i-1].action===b.d.CoachItemGenerateJson||(null===(n=r[i-1])||void 0===n?void 0:n.text)===ke.j||a.action===b.d.CoachItemStuckEnd||(null==a?void 0:a.text)===ke.q||i===r.length-1&&t)};return i?Object(Be.d)("div",{css:Ai.messageContainer},Object(Be.d)(LoadingView,{labelMessage:Je()("Loading...")})):r?Object(Be.d)("div",{css:Ai.messageContainer},Object(Be.d)(chat_view_ErrorView,{error:r})):Object(Be.d)("div",{css:Ai.messageContainer},Object(Be.d)(chat_view_RolePlayIntroSession,{hideMessage:hideMessage}),Object(Be.d)(chat_view_RolePlaySimulationSession,{coachPersona:n,hideMessage:hideMessage,isRolePlayTaskResponseLoading:t}),Object(Be.d)(chat_view_RolePlayDebriefSession,{hideMessage:hideMessage}))},icons_AiPersonaAvatar=function(){return bt||(bt=a.createElement("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"ai-persona-avatar"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1566 9.46715C24.0384 9.17762 23.6284 9.17762 23.5102 9.46715L23.0061 10.7018C22.8879 10.9914 22.6581 11.2211 22.3686 11.3394L21.1339 11.8435C20.8444 11.9617 20.8444 12.3717 21.1339 12.4899L22.3686 12.994C22.6581 13.1122 22.8879 13.342 23.0061 13.6315L23.5102 14.8662C23.6284 15.1557 24.0384 15.1557 24.1566 14.8662L24.6607 13.6315C24.7789 13.342 25.0087 13.1122 25.2982 12.994L26.5329 12.4899C26.8225 12.3717 26.8225 11.9617 26.5329 11.8435L25.2982 11.3394C25.0087 11.2211 24.7789 10.9914 24.6607 10.7018L24.1566 9.46715ZM17.567 11.5567C17.3698 11.0737 16.6858 11.0737 16.4886 11.5567L15.42 14.1739C14.8284 15.6229 13.6785 16.7729 12.2295 17.3645L9.61227 18.433C9.12925 18.6302 9.12924 19.3142 9.61227 19.5114L12.2295 20.58C13.6785 21.1716 14.8284 22.3215 15.42 23.7705L16.4886 26.3877C16.6858 26.8707 17.3698 26.8707 17.567 26.3877L18.6355 23.7705C19.2271 22.3215 20.3771 21.1716 21.8261 20.58L24.4433 19.5114C24.9263 19.3142 24.9263 18.6302 24.4433 18.433L21.8261 17.3645C20.3771 16.7729 19.2271 15.6229 18.6355 14.1739L17.567 11.5567Z",fill:"url(#paint0_linear_1116_1338)"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"paint0_linear_1116_1338",x1:"7.92598",y1:"26.75",x2:"31.614",y2:"26.1636",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"var(--cds-color-blue-800)"}),a.createElement("stop",{offset:"1",stopColor:"var(--cds-color-blue-600)"})))))},Ti={conversationContainer:Object(Be.c)(kt||(kt=De()(["\n    height: 100%;\n  "]))),conversation:Object(Be.c)(Ct||(Ct=De()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-background-primary);\n    }\n\n    .coach-message-client {\n      background-color: unset;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),He.a.down("xs")),headerContainer:Object(Be.c)(St||(St=De()(["\n    flex-grow: 0;\n    border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n  "]))),coachAvatarContainer:Object(Be.c)(yt||(yt=De()(["\n    width: 36px;\n    height: 36px;\n    background: var(--cds-color-interactive-stroke-primary-focus-invert);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    border-radius: 50%;\n  "]))),endStateContainer:Object(Be.c)(Ot||(Ot=De()(["\n    margin: 0 auto;\n    width: 100%;\n  "]))),footerContainer:Object(Be.c)(It||(It=De()(["\n    flex-grow: 0;\n    width: 100%;\n    margin: 0 auto;\n    max-width: ",";\n  "])),ke.b+"px"),divider:Object(Be.c)(wt||(wt=De()(["\n    margin: var(--cds-spacing-600) 0;\n  "])))},chat_view_RolePlayChatConversation=function(e){var n=e.onStartButtonClick,t=e.onTryAgainClick,a=e.isTaskResponseLoading,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.rolePlayAiPersonaTitle,o=i.rolePlaySimulationSessionId,s=i.authorCoachItemSyncNotification,c=r&&!!o?{name:r,avatar:Object(Be.d)(Ve.a,{css:Ti.coachAvatarContainer},jt||(jt=Object(Be.d)(icons_AiPersonaAvatar,null)))}:void 0;return Object(Be.d)("div",{css:Ti.conversation},Object(Be.d)(chat_view_RolePlayChatSessions,{coachPersona:c,isTaskResponseLoading:a}),s&&s,xt||(xt=Object(Be.d)(un.a,{color:"light",orientation:"horizontal"})),Object(Be.d)(chat_view_RolePlayChatActions,{coachPersona:c,onStartButtonClick:n,onTryAgainClick:t}),Object(Be.d)("div",{css:Ti.footerContainer},Object(Be.d)(components_Footer,{coachPersona:c&&O()(O()({},c),{},{name:"This Role Play activity"})})))},Ri={coachItemContainer:Object(Be.c)(Et||(Et=De()(["\n    margin: 0;\n    width: 100%;\n    height: 100%;\n    overflow-y: hidden;\n\n    "," {\n      margin-top: 1px;\n    }\n\n    .coach-new-message {\n      width: 100%;\n    }\n\n    .coach-input {\n      height: 60px;\n    }\n  "])),He.a.down("xs"))},chat_view_ChatView=function(e){var n=e.onStartButtonClick,t=e.onTryAgainClick,i=e.isTaskResponseLoading,r=e.styles,o=useCoachItemChatContext_useCoachItemChatContext(),s=o.courseId,c=o.itemId,d=o.authoringMode,l=o.coachItemType,u=Object(ye.a)(d),m=Object(qe.e)();return a.useEffect((function(){m("interact_coach",O()(O()({coachInteractionType:"launch_coach_tool",coach:{mode:u}},s&&{product:{type:"course",id:s}}),c&&{courseItem:{id:c}}))}),[s,c,u,m]),Object(Be.d)("div",{"data-testid":"coursera-coach-item",id:"coursera-coach-item",css:[Ri.coachItemContainer,r]},Object(Be.d)(cn.a,{value:{data:{mode:u,courseId:s,itemId:c}}},Object(Be.d)(dn.a,{value:{data:{mode:u,courseId:s,itemId:c}}},l===Ie.e.SocraticDialogue&&(Nt||(Nt=Object(Be.d)(chat_view_ChatConversation,null))),l===Ie.e.RolePlay&&Object(Be.d)(chat_view_RolePlayChatConversation,{onStartButtonClick:n,onTryAgainClick:t,isTaskResponseLoading:i}))))},Mi=n("/jXm"),Pi=n.n(Mi),Fi={img:Object(Be.c)(_t||(_t=De()(["\n    button[aria-disabled='true'] & {\n      opacity: 0.1;\n    }\n  "])))},chat_view_HowAmIDoingButton=function(e){var n=e.onClick,t=e.style,a=e.disabled,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.sendMessage,o=i.courseId,s=i.itemId,c=Object(qe.e)();return Object(Be.d)(bn.b,{onClick:function(){c("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_HOW_AM_I_DOING",coach:{mode:b.g.CoachItem},product:{type:"course",id:o},courseItem:{id:s}}),r(ke.n,b.d.TypedMessage),null==n||n()},size:"medium",variant:"ghost",iconPosition:"before","aria-label":Je()("How am I doing?"),icon:Object(Be.d)("img",{css:Fi.img,height:"16",width:"16",src:Pi.a,alt:""}),disabled:a,css:t},Je()("How am I doing?"))},Li=n("84CE"),Di=n.n(Li),Bi={img:Object(Be.c)(At||(At=De()(["\n    button[aria-disabled='true'] & {\n      opacity: 0.1;\n    }\n  "])))},chat_view_ImStuckButton=function(e){var n=e.onClick,t=e.style,a=e.disabled,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.sendMessage,o=i.courseId,s=i.itemId,c=Object(qe.e)();return Object(Be.d)(bn.b,{onClick:function(){c("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_I_AM_STUCK",coach:{mode:b.g.CoachItem},product:{type:"course",id:o},courseItem:{id:s}}),r(ke.c,b.d.TypedMessage),null==n||n()},size:"medium",variant:"ghost",iconPosition:"before","aria-label":Je()("I'm stuck"),icon:Object(Be.d)("img",{css:Bi.img,height:"16",width:"16",src:Di.a,alt:""}),disabled:a,css:t},Je()("I'm stuck"))},Hi=qe.b.HeadingGroup,Vi=qe.b.Content,Ui=qe.b.Actions,qi={dialogActions:Object(Be.c)(Tt||(Tt=De()(["\n    "," {\n      flex-direction: column;\n\n      button {\n        max-width: 100%;\n        width: 100%;\n      }\n    }\n  "])),He.a.down("sm"))},chat_view_NewChatButton=function(e){var n=e.onClick,t=e.onConfirm,i=e.useIconButton,r=e.style,o=e.disabled,s=e.buttonText,c=a.useState(!1),d=f()(c,2),l=d[0],u=d[1],p=Object(qe.e)(),v=useCoachItemChatContext_useCoachItemChatContext(),h=v.startNewChat,k=v.courseId,C=v.itemId,S=v.coachItemType,closeDialog=function(){u(!1),null==n||n()},y=function(){var e=g()(m()().mark((function _callee(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_START_CHAT_NEW_CHAT_DIALOG",coach:{mode:b.g.CoachItem},product:{type:"course",id:k},courseItem:{id:C,type:Object(ye.g)(S)}}),h(),closeDialog(),null==t||t();case 4:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}(),onNewChatButtonClick=function(){p("click_button",{button:{name:"coach_item_new_chat"},courseItem:{id:C,type:Object(ye.g)(S)}}),u(!0)};return Object(Be.d)(a.Fragment,null,i?Object(Be.d)(bn.d,{onClick:onNewChatButtonClick,icon:Rt||(Rt=Object(Be.d)(hn.g,{"data-testid":"new-chat-icon"})),"aria-label":S===Ie.e.RolePlay?Je()("New session"):Je()("New chat"),disabled:o,tooltip:S===Ie.e.RolePlay?Je()("New session"):Je()("New chat"),css:r}):Object(Be.d)(bn.b,{onClick:onNewChatButtonClick,size:"medium",variant:"ghost",iconPosition:"before","aria-label":s||(S===Ie.e.RolePlay?Je()("New session"):Je()("New chat")),icon:!1===i?void 0:Mt||(Mt=Object(Be.d)(hn.g,{"data-testid":"new-chat-icon"})),disabled:o,css:r},s||(S===Ie.e.RolePlay?Je()("New session"):Je()("New chat"))),Object(Be.d)(qe.b,{"aria-describedby":"coach-item-new-chat-dialog-content",sticky:"actions",trackingData:{modal:{name:"coach_item_new_chat_dialog"}},open:l,variant:"transactional",onClose:closeDialog},Object(Be.d)(Hi,null,Je()("Are you sure?")),Object(Be.d)(Vi,{id:"coach-item-new-chat-dialog-content"},Object(Be.d)(ze.a,{component:"p"},S===Ie.e.RolePlay?Je()("If you start a new session, this one will disappear."):Je()("If you start a new chat, this one will disappear."))),Object(Be.d)(Ui,null,Object(Be.d)(Ve.a,{container:!0,spacing:16,css:qi.dialogActions},Object(Be.d)(Ve.a,{item:!0},Object(Be.d)(Ue.a,{variant:"primary",size:"medium",onClick:y},S===Ie.e.RolePlay?Je()("Yes, start a new session"):Je()("Yes, start a new chat"))),Object(Be.d)(Ve.a,{item:!0},Object(Be.d)(Ue.a,{variant:"secondary",size:"medium",onClick:closeDialog},Je()("Cancel")))))))},zi=n("9rZX"),Gi=n.n(zi),Wi=n("wr+D"),Yi=n("+Fz1"),Ki=n("5ydG"),Qi={headerRight:Object(Be.c)(Pt||(Pt=De()(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  "]))),headerLeft:Object(Be.c)(Ft||(Ft=De()(["\n    overflow: hidden;\n  "]))),tunnelVisionContentContainer:Object(Be.c)(Lt||(Lt=De()(["\n    width: 100%;\n    height: 100%;\n    position: relative;\n  "]))),closeElementContainer:Object(Be.c)(Dt||(Dt=De()(["\n    display: flex;\n    align-items: center;\n  "]))),tunnelVision:Object(Be.c)(Bt||(Bt=De()(["\n    .rc-TunnelVision div[data-classname='tunnelvision-window-0'] {\n      "," {\n        margin-left: 0;\n      }\n    }\n\n    .rc-TunnelVisionHeader {\n      > div {\n        overflow-x: hidden;\n      }\n    }\n\n    .rc-TunnelVisionClose {\n      background-color: var(--cds-color-neutral-background-primary);\n      margin-right: var(--cds-spacing-100);\n\n      &:focus,\n      &:hover {\n        background-color: var(--cds-color-interactive-stroke-primary-focus-invert);\n      }\n\n      "," {\n        margin-right: var(--cds-spacing-200);\n      }\n    }\n  "])),He.a.down("sm"),He.a.up("md"))},TunnelVisionWrapper_TunnelVisionWrapper=function(e){var n=e.onClose,t=e.headerLeft,i=e.headerRight,r=e.topBanner,o=e.children,s=e.ariaLabel,c=e.backbuttonAriaLabel,d=e.shouldConfirmClose,l=a.useState(!1),u=f()(l,2),m=u[0],p=u[1],g=a.useState(!1),v=f()(g,2),h=v[0],b=v[1],k=a.useState(null),C=f()(k,2),S=C[0],y=C[1],O=a.useRef(null),scrollPage=function(e){O.current&&O.current.scrollTo(0,e)},I=a.useCallback((function(e){if(O.current){var n=O.current.scrollTop||0;switch(e.keyCode){case 38:if(n<=0)return;scrollPage(n-50);break;case 33:if(n<=0)return;scrollPage(n-O.current.clientHeight);break;case 36:scrollPage(0);break;case 40:if(n>=O.current.scrollHeight)return;scrollPage(n+50);break;case 34:if(n>=O.current.scrollHeight)return;scrollPage(n+O.current.clientHeight);break;case 35:scrollPage(O.current.scrollHeight)}}}),[]);a.useEffect((function(){return Gi.a.setAppElement("#rendered-content"),p(!0),document.addEventListener("keydown",I),function(){document.removeEventListener("keydown",I)}}),[I]);return Object(Be.d)(Gi.a,{style:{overlay:{position:"relative",zIndex:4e3}},isOpen:m,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,css:Qi.tunnelVision,contentLabel:s},Object(Be.d)(Yi.a,{onClose:n,disableKeyPress:!0,shouldAllowClose:function(e){return!d||(b(!0),y(e||null),!1)},closeElement:Ht||(Ht=Object(Be.d)(Wi.a,null)),headerElement:Object(Be.d)(Ve.a,{container:!0,justifyContent:"space-between",alignItems:"center","data-testid":"tunnel-vision-header"},Object(Be.d)(Ve.a,{item:!0,xs:9,sm:8,md:6,css:Qi.headerLeft},t),Object(Be.d)(Ve.a,{item:!0,xs:3,sm:4,md:6,justifyContent:"flex-end",css:Qi.headerRight},i)),ariaLabel:s,backbuttonAriaLabel:c},Object(Be.d)(Ve.a,{ref:O,css:Qi.tunnelVisionContentContainer,id:"TUNNELVISIONWRAPPER_CONTENT_ID","data-testid":"tunnel-vision-content"},r&&Object(Be.d)(Ve.a,{role:"alert","aria-live":"assertive"},r),o),h&&Object(Be.d)(Ki.a,{onPrimaryButtonClick:function(){b(!1),y(null),S&&S()},onCancelButtonClick:function(){b(!1),y(null)}})))},Ji={itemName:Object(Be.c)(Vt||(Vt=De()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  "]))),itemNameSupportText:Object(Be.c)(Ut||(Ut=De()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  "]))),headerRight:Object(Be.c)(qt||(qt=De()(["\n    margin-right: var(--cds-spacing-150);\n    width: 100%;\n  "]))),menuButton:Object(Be.c)(zt||(zt=De()(["\n    margin-right: var(--cds-spacing-150);\n  "]))),menuItemButton:Object(Be.c)(Gt||(Gt=De()(["\n    max-width: unset;\n    width: 100%;\n    display: flex;\n    justify-content: flex-start;\n    margin-bottom: var(--cds-spacing-100);\n\n    img,\n    svg {\n      /* To override the CDS gap between icon and text */\n      margin-right: var(--cds-spacing-200) !important;\n    }\n  "])))},$i=rn.a.HeadingGroup,Xi=rn.a.Content,chat_view_DialogueChatViewTunnelVision=function(){var e=useCoachItemChatContext_useCoachItemChatContext(),n=e.coachItemType,t=e.isDialogueLoading,i=e.itemName,r=e.chatIsOpen,o=e.setChatIsOpen,s=Object(qe.e)(),c=Object(h.c)((function(e){return e.sessionState.chatState})),d=Object(h.c)((function(e){return e.messages.messages})),l=d[d.length-1],u=!useCoachItemSendMessage_getStartedRecommendedAction(null==l?void 0:l.recommendedActions),m=Object(h.c)((function(e){return e.behavior.messageLoader})),p=!u||m,g=a.useState(!1),v=f()(g,2),b=v[0],k=v[1],C=Object(on.a)(He.a.down("sm")),closeActionsDialog=function(){k(!1)};return r?Object(Be.d)(TunnelVisionWrapper_TunnelVisionWrapper,{onClose:function(){s("click_button",{button:{name:"coach_item_tv_back_button"}}),o(!1)},ariaLabel:Je()("Dialogue"),backbuttonAriaLabel:Je()("Close dialogue"),headerLeft:Object(Be.d)("div",null,Object(Be.d)(ze.a,{variant:"subtitleLarge",component:"h1",css:Ji.itemName},i),Object(Be.d)(ze.a,{component:"p",variant:"bodySecondary",color:"supportText",css:Ji.itemNameSupportText},Je()("Dialogue"))),headerRight:!t&&Object(Be.d)(a.Fragment,null,C?Object(Be.d)(sn.a,{intent:"menu",variant:"ghost",onClick:function(){k(!0)},"aria-label":Je()("Dialogue actions"),css:Ji.menuButton}):Object(Be.d)(Ve.a,{container:!0,justifyContent:"flex-end",alignItems:"center",direction:"row",wrap:"nowrap",css:Ji.headerRight,spacing:12},"ACTIVE"===c&&n===Ie.e.SocraticDialogue&&Object(Be.d)(a.Fragment,null,Object(Be.d)(Ve.a,{item:!0},Object(Be.d)(chat_view_HowAmIDoingButton,{disabled:p})),Object(Be.d)(Ve.a,{item:!0},Object(Be.d)(chat_view_ImStuckButton,{disabled:p}))),Object(Be.d)(Ve.a,{item:!0},Object(Be.d)(chat_view_NewChatButton,{disabled:p})))),topBanner:void 0},Wt||(Wt=Object(Be.d)(chat_view_ChatView,null)),Object(Be.d)(rn.a,{open:b,onClose:closeActionsDialog,"aria-describedby":"dialog-actions-content",anchor:"right"},Object(Be.d)($i,null,Je()("Dialogue actions")),Object(Be.d)(Xi,{id:"dialog-actions-content"},Object(Be.d)(Ve.a,{container:!0,direction:"column",alignItems:"flex-start"},"ACTIVE"===c&&n===Ie.e.SocraticDialogue&&Object(Be.d)(a.Fragment,null,Object(Be.d)(chat_view_HowAmIDoingButton,{onClick:closeActionsDialog,style:Ji.menuItemButton,disabled:p}),Object(Be.d)(chat_view_ImStuckButton,{onClick:closeActionsDialog,style:Ji.menuItemButton,disabled:p})),Object(Be.d)(chat_view_NewChatButton,{onClick:closeActionsDialog,style:Ji.menuItemButton,disabled:p}))))):null},Zi=n("UWlR"),er=["title","subTitle","headerRightElement"],nr={headerContainer:Object(Be.c)(Yt||(Yt=De()(["\n    position: sticky;\n    top: 0;\n    left: 0;\n    max-height: ","px;\n    height: ","px;\n    width: 100%;\n    padding: var(--cds-spacing-200);\n    border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n    border-radius: var(--cds-spacing-150) var(--cds-spacing-150) 0 0;\n    background-color: var(--cds-color-neutral-background-primary);\n  "])),68,68),titleSection:Object(Be.c)(Kt||(Kt=De()(["\n    overflow: hidden;\n\n    "," {\n      width: 75%;\n    }\n  "])),He.a.down("sm")),title:Object(Be.c)(Qt||(Qt=De()(["\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  "]))),closeButtonIcon:Object(Be.c)(Jt||(Jt=De()(["\n    margin-right: var(--cds-spacing-150);\n    color: var(--cds-color-neutral-primary);\n    border-radius: 50%;\n  "]))),actionButton:Object(Be.c)($t||($t=De()(["\n    color: var(--cds-color-neutral-primary);\n  "]))),header:Object(Be.c)(Xt||(Xt=De()(["\n    "," {\n      flex-shrink: 1;\n      min-width: 0;\n    }\n  "])),He.a.down("sm"))},MainPanelHeader_BackButton=function(e){var n=e.closeButtonIcon,t=e.tooltip,a=e.closeButtonAriaLabel,i=e.onClose;return Object(Be.d)(sn.a,{css:nr.closeButtonIcon,component:"button",icon:n||Zt||(Zt=Object(Be.d)(Wi.a,null)),size:"medium",variant:"ghost",onClick:i,tooltip:t||Je()("Back"),"aria-label":a||Je()("Close Tunnel Vision")})},MainPanelHeader_MainPanelHeader=function(e){var n=e.title,t=e.subTitle,a=e.headerRightElement,i=l()(e,er);return Object(Be.d)(Ve.a,{container:!0,alignItems:"center",wrap:"nowrap",css:nr.headerContainer},Object(Be.d)(Ve.a,{item:!0},Object(Be.d)(MainPanelHeader_BackButton,i)),Object(Be.d)(Ve.a,{container:!0,item:!0,justifyContent:"space-between",alignItems:"center","data-testid":"tunnel-vision-header",css:nr.header},Object(Be.d)(Ve.a,{item:!0,css:nr.titleSection},Object(Be.d)(ze.a,{component:"h1",variant:"subtitleLarge",css:nr.title},n),t&&Object(Be.d)(ze.a,{component:"span",variant:"bodySecondary"},t)),a&&Object(Be.d)(Ve.a,{item:!0},a)))},tr={reactModal:Object(Be.c)(ea||(ea=De()(["\n    outline: none;\n  "]))),modalOverlay:Object(Be.c)(na||(na=De()(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100dvh; /* dvh = device viewport height: required so that on iOS devices elements do not extend beneath browser's interface such as the bottom navigation bar */\n    background-color: var(--cds-color-emphasis-neutral-background-xweak);\n\n    /* Prevent mobile scrolling and touch behaviors */\n    overflow: hidden;\n    touch-action: none;\n    -webkit-overflow-scrolling: touch;\n\n    /* Ensure proper stacking and positioning */\n    z-index: 9999;\n  "]))),modalContent:Object(Be.c)(ta||(ta=De()(["\n    width: 100%;\n    height: 100%;\n    padding: var(--cds-spacing-200);\n\n    /* Allow internal scrolling while preventing document scroll */\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n\n    "," {\n      padding: var(--cds-spacing-200);\n\n      /* Ensure content stays within viewport on mobile */\n      max-height: 100%;\n    }\n  "])),He.a.down("sm")),temporaryDrawer:Object(Be.c)(aa||(aa=De()(["\n    button {\n      color: var(--cds-color-neutral-primary);\n    }\n  "]))),closeButtonIcon:Object(Be.c)(ia||(ia=De()(["\n    margin-right: var(--cds-spacing-150);\n  "]))),globalStyles:function(e){return Object(Be.c)(ra||(ra=De()(["\n    @keyframes slideIn {\n      from {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n\n      to {\n        transform: translateX(0);\n        opacity: 1;\n      }\n    }\n\n    @keyframes slideOut {\n      from {\n        transform: translateX(0);\n        opacity: 1;\n      }\n\n      to {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n    }\n\n    .ReactModal__Overlay {\n      opacity: 0;\n      animation: "," ","ms ease-out forwards;\n    }\n\n    .ReactModal__Overlay--after-open {\n      opacity: 1;\n    }\n\n    .ReactModal__Overlay--before-close {\n      opacity: 0;\n    }\n  "])),e?"slideIn":"slideOut",400)}},components_TunnelVision=function(e){var n=e.ariaLabel,t=e.isOpen,i=void 0!==t&&t,r=e.children;return a.useEffect((function(){Gi.a.setAppElement("#rendered-content")}),[]),a.useEffect((function(){if(i){var e=document.body.style.overflow,n=document.body.style.position;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",function(){document.body.style.overflow=e,document.body.style.position=n,document.body.style.width="",document.body.style.height=""}}}),[i]),Object(Be.d)(a.Fragment,null,Object(Be.d)(Be.b,{styles:tr.globalStyles(i)}),Object(Be.d)(Gi.a,{style:{overlay:{position:"relative",zIndex:4e3}},closeTimeoutMS:400,isOpen:i,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,css:tr.reactModal},Object(Be.d)("div",{css:tr.modalOverlay,"aria-label":n},Object(Be.d)("div",{css:tr.modalContent},r))))},ar=mi.a.HeadingGroup,ir=mi.a.Content,rr=mi.a.Actions,or={introductoryText:Object(Be.c)(oa||(oa=De()(["\n    margin-bottom: var(--cds-spacing-200);\n  "]))),actionButtons:Object(Be.c)(sa||(sa=De()(["\n    padding-left: 0;\n  "])))},sr=function(e){return e.DEFAULT="DEFAULT",e.FEEL_STUCK="FEEL_STUCK",e.TECHNICAL_ISSUES="TECHNICAL_ISSUES",e.TIME_CONSTRAINT="TIME_CONSTRAINT",e.NOT_VALUABLE="NOT_VALUABLE",e.DISLIKE_ITEM_TYPE="DISLIKE_ITEM_TYPE",e}({}),EndRolePlayDialog_getEndRolePlayMessage=function(e){switch(e){case sr.FEEL_STUCK:return Je()("I feel stuck and can't complete the activity");case sr.TECHNICAL_ISSUES:return Je()("I'm experiencing technical issues");case sr.TIME_CONSTRAINT:return Je()("I don't have time to finish right now");case sr.NOT_VALUABLE:return Je()("This isn't engaging or valuable for me");case sr.DISLIKE_ITEM_TYPE:return Je()("I'd prefer a different way to learn");case sr.DEFAULT:default:return Je()("Reason not provided")}},chat_view_EndRolePlayDialog=function(e){var n=e.onClose,t=e.isOpen,i=a.useState(sr.DEFAULT),r=f()(i,2),o=r[0],s=r[1],c=useCoachItemChatContext_useCoachItemChatContext(),d=c.sendMessage,l=c.trackingData,u=Object(qe.e)(),p=function(){var e=g()(m()().mark((function _callee(){var e;return m()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u("interact_coach",O()({coachInteractionType:"click_action",coachAction:b.d.CoachItemStuckEnd},l)),e=EndRolePlayDialog_getEndRolePlayMessage(o),d(e,b.d.CoachItemStuckEnd),n();case 4:case"end":return t.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return Object(Be.d)(mi.a,{open:t,onClose:n,"data-testid":"end-role-play-dialog"},Object(Be.d)(ar,null,Je()("End the Role Play?")),Object(Be.d)(ir,null,Object(Be.d)(ze.a,{css:or.introductoryText,component:"p"},Je()("You'll get feedback based on your progress so far. You won't be able to resume, but you can try again from the beginning.")),Object(Be.d)(pi.a,{label:Je()("Reason for ending"),optional:!0,"data-testid":"end-role-play-reason-select-field",placeholder:Je()("Select a reason"),supportText:Je()("Please share why you're ending early to help us improve the experience."),onChange:function(e){var n=e.target.value;s(n)}},Object.values(sr).map((function(e){return Object(Be.d)(gi.a,{key:e,value:e},EndRolePlayDialog_getEndRolePlayMessage(e))}))),Object(Be.d)(rr,{css:or.actionButtons},Object(Be.d)(vi.a,{alternateButtonProps:{children:Je()("Cancel"),variant:"secondary",onClick:n},primaryButtonProps:{children:Je()("Yes, end the Role Play"),onClick:p}}))))},cr=n("ojHA"),dr=n("JYd8"),lr=Object(dr.a)("ComprehensionCheckIcon",{ltr:{large:function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("path",{d:"M9.996 18c-.414 0-.767-.147-1.059-.44A1.45 1.45 0 018.5 16.5h3c0 .417-.147.77-.442 1.063A1.456 1.456 0 019.996 18zm-2.24-2.5a.738.738 0 01-.537-.214.714.714 0 01-.219-.532c0-.21.072-.39.215-.535A.719.719 0 017.75 14h4.495c.212 0 .391.072.537.214.146.143.219.32.219.532 0 .21-.072.39-.215.535a.719.719 0 01-.534.219H7.756zM6.687 13a5.355 5.355 0 01-1.99-2.135A6.127 6.127 0 014 8c0-1.667.583-3.083 1.75-4.25C6.917 2.583 8.333 2 10 2c1.667 0 3.083.583 4.25 1.75C15.417 4.917 16 6.333 16 8a6.127 6.127 0 01-.698 2.865A5.355 5.355 0 0113.312 13H6.689zm.48-1.5h5.666a4.49 4.49 0 001.23-1.563A4.442 4.442 0 0014.5 8c0-1.255-.436-2.318-1.308-3.19-.872-.874-1.934-1.31-3.187-1.31s-2.318.436-3.193 1.31C5.938 5.681 5.5 6.744 5.5 8c0 .68.146 1.326.438 1.938A4.489 4.489 0 007.167 11.5z",fill:"currentColor"}))}}},!1),ur={splitPanelView:function(e){return Object(Be.c)(ca||(ca=De()(["\n    display: flex;\n    flex-wrap: nowrap;\n    width: 100%;\n    align-items: stretch;\n    height: 100%;\n    max-height: 100%;\n    gap: ",";\n\n    "," {\n      flex-direction: ",";\n      gap: 0;\n    }\n  "])),e?0:"var(--cds-spacing-100)",He.a.down("sm"),e?"unset":"column")},mainPanelContent:function(e){return Object(Be.c)(da||(da=De()(["\n    flex-grow: 1;\n    position: relative;\n\n    /* Desktop: always visible */\n    display: block;\n\n    /* Mobile: hide when panel expanded, show when collapsed */\n    "," {\n      display: ",";\n      height: calc(100% - ","px);\n    }\n  "])),He.a.down("sm"),e?"none":"block",72)},sidePanelContainer:function(e){return Object(Be.c)(la||(la=De()(["\n    height: 100%;\n    min-width: ","px;\n    max-width: ","px;\n\n    "," {\n      flex-grow: ",";\n      min-width: unset;\n      width: unset;\n      max-width: unset;\n      margin-right: 0;\n    }\n  "])),e?400:72,e?400:72,He.a.down("sm"),e?1:"unset")},tabListContainer:Object(Be.c)(ua||(ua=De()(["\n    height: 100%;\n    width: ","px;\n    min-width: ","px;\n    z-index: 2;\n    background-color: var(--cds-color-emphasis-neutral-background-xweak);\n\n    button {\n      background-color: var(--cds-color-emphasis-neutral-background-xweak);\n    }\n\n    "," {\n      height: ","px;\n      width: 100%;\n      flex-direction: row;\n      justify-content: center;\n    }\n  "])),72,72,He.a.down("sm"),72),tabList:Object(Be.c)(ma||(ma=De()(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: var(--cds-spacing-150);\n    padding: var(--cds-spacing-150) 0;\n\n    "," {\n      flex-grow: 1;\n      flex-direction: row;\n      justify-content: space-around;\n    }\n  "])),He.a.down("sm")),sidePanelContent:function(e){return Object(Be.c)(pa||(pa=De()(["\n    height: 100%;\n    margin-right: auto;\n    margin-left: var(--cds-spacing-200);\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-spacing-150);\n    z-index: 1;\n    width: ","px;\n    min-width: ","px;\n\n    /* Hide when collapsed to preserve component state */\n    display: ",";\n\n    "," {\n      width: 100%;\n      height: calc(100% - ","px);\n      margin: 0;\n      flex-grow: 1;\n    }\n  "])),300,300,e?"block":"none",He.a.down("sm"),72)},sidePanelContentContainer:function(e){return Object(Be.c)(ga||(ga=De()(["\n    display: ",";\n    height: 100%;\n  "])),e?"block":"none")},panelsContainer:Object(Be.c)(va||(va=De()(["\n    display: flex;\n    flex-wrap: nowrap;\n    flex-direction: row;\n    gap: var(--cds-spacing-100);\n    height: 100%;\n    overflow-y: hidden;\n\n    "," {\n      flex-direction: column;\n      flex-basis: content;\n      gap: 0;\n    }\n  "])),He.a.down("sm"))},components_SplitPanelView=function(e){var n=e.mainContent,t=e.panels,a=e.selectedPanel,i=e.onPanelChange,r=e.isSidePanelExpanded,o=e.testId,handleSelectItem=function(e){i(e,a!==e||!r)};return Object(Be.d)("div",{css:ur.splitPanelView(r),"data-testid":o||"split-panel-view"},Object(Be.d)("div",{css:ur.mainPanelContent(r)},n),Object(Be.d)("div",{css:ur.sidePanelContainer(r)},Object(Be.d)(Ve.a,{"data-testid":"panel-manager",container:!0,item:!0,css:ur.panelsContainer,direction:"row",wrap:"nowrap"},Object(Be.d)(Ve.a,{item:!0,css:ur.sidePanelContent(r),"data-testid":"panel-content"},t.map((function(e){var n=a===e.name;return Object(Be.d)("div",{key:e.name,role:"tabpanel",id:"tabpanel-".concat(e.name),"aria-labelledby":"tab-".concat(e.name),tabIndex:n?0:-1,css:ur.sidePanelContentContainer(n),"aria-hidden":!n},e.component)}))),Object(Be.d)(Ve.a,{item:!0,css:ur.tabListContainer},Object(Be.d)("div",{css:ur.tabList,role:"tablist"},t.map((function(e){var n=e.name,t=e.icon,i=e.displayName,o=r&&n===a,s=!e.enabled;return Object(Be.d)(bn.k,{role:"tab",size:"medium",key:n,id:"tab-".concat(n),"aria-label":n,"aria-controls":"tabpanel-".concat(n),onClick:function(){return handleSelectItem(n)},onKeyDown:function(e){return function(e,n){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),handleSelectItem(n))}(e,n)},icon:t,disabled:s,"data-testid":"panel-button-".concat(n),selected:o,"aria-selected":o},i)})))))))},mr=n("fdGY"),pr={header:Object(Be.c)(fa||(fa=De()(["\n    ","\n    justify-content: space-between;\n    width: unset;\n  "])),nr.headerContainer),titleSection:Object(Be.c)(ha||(ha=De()(["\n    display: flex;\n    flex-direction: column;\n  "]))),closeButton:Object(Be.c)(ba||(ba=De()(["\n    border-radius: 50%;\n  "]))),closeButtonIcon:Object(Be.c)(ka||(ka=De()(["\n    color: var(--cds-color-neutral-primary);\n  "])))},components_SidePanelHeader=function(e){var n=e.title,t=e.subTitle,a=e.onClose;return Object(Be.d)(Ve.a,{container:!0,alignItems:"center",wrap:"nowrap",css:pr.header},Object(Be.d)(Ve.a,{css:pr.titleSection},Object(Be.d)(ze.a,{component:"h4",variant:"actionPrimary"},n),t&&Object(Be.d)(ze.a,{component:"span",variant:"bodySecondary"},t)),Object(Be.d)(Ue.a,{onClick:a,size:"small",variant:"ghost","aria-label":Je()("Close #{title} panel",{title:n}),css:pr.closeButton},Object(Be.d)(mr.a,{size:"medium",title:Je()("Close"),css:pr.closeButtonIcon})))},gr={overviewContent:Object(Be.c)(Ca||(Ca=De()(["\n    padding: var(--cds-spacing-200) var(--cds-spacing-300);\n    height: calc(100% - ","px);\n    overflow-y: auto;\n  "])),68)},components_RolePlayOverviewPanel=function(e){var n=e.onClose,t=e.overviewInstructions;return Object(Be.d)(a.Fragment,null,Object(Be.d)(components_SidePanelHeader,{title:Je()("Overview"),subTitle:Je()("Reference these details in the Role Play."),onClose:n}),Object(Be.d)(components_LearnerOverview,{overviewInstructions:t,style:gr.overviewContent}))},vr=n("+H68"),fr=n("dYbo"),icons_LightBulbIcon=function(e){var n=e.color,t=void 0===n?"var(--cds-color-neutral-primary)":n,i=e.width,r=void 0===i?24:i,o=e.height,s=void 0===o?24:o;return(a.createElement("svg",{width:r,height:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"lightbulb-icon"},a.createElement("mask",{id:"mask0_3768_45643",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24"},Sa||(Sa=a.createElement("rect",{width:"24",height:"24",fill:"var(--cds-color-grey-100)"}))),a.createElement("g",{mask:"url(#mask0_3768_45643)"},a.createElement("path",{d:"M12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 19V17H16V19H8ZM8.25 16C7.1 15.3167 6.1875 14.4 5.5125 13.25C4.8375 12.1 4.5 10.85 4.5 9.5C4.5 7.41667 5.22917 5.64583 6.6875 4.1875C8.14583 2.72917 9.91667 2 12 2C14.0833 2 15.8542 2.72917 17.3125 4.1875C18.7708 5.64583 19.5 7.41667 19.5 9.5C19.5 10.85 19.1625 12.1 18.4875 13.25C17.8125 14.4 16.9 15.3167 15.75 16H8.25ZM8.85 14H15.15C15.9 13.4667 16.4792 12.8083 16.8875 12.025C17.2958 11.2417 17.5 10.4 17.5 9.5C17.5 7.96667 16.9667 6.66667 15.9 5.6C14.8333 4.53333 13.5333 4 12 4C10.4667 4 9.16667 4.53333 8.1 5.6C7.03333 6.66667 6.5 7.96667 6.5 9.5C6.5 10.4 6.70417 11.2417 7.1125 12.025C7.52083 12.8083 8.1 13.4667 8.85 14Z",fill:t}))))},hr={hintContainer:Object(Be.c)(ya||(ya=De()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-border-radius-200);\n    border: 1px solid var(--cds-color-grey-50);\n    padding: var(--cds-spacing-150) var(--cds-spacing-200);\n    transition: all 0.2s ease-in-out;\n\n    "," {\n      width: 100%;\n    }\n  "])),He.a.down("sm")),hintHeader:Object(Be.c)(Oa||(Oa=De()(["\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    justify-content: space-between;\n    gap: var(--cds-spacing-100);\n  "]))),titleWrapper:Object(Be.c)(Ia||(Ia=De()(["\n    display: flex;\n    align-items: center;\n    gap: var(--cds-spacing-150);\n  "]))),title:function(e){return Object(Be.c)(wa||(wa=De()(["\n    color: ",";\n  "])),e?"var(--cds-color-neutral-primary)":"var(--cds-color-neutral-primary-weak)")},content:Object(Be.c)(ja||(ja=De()(["\n    margin-top: var(--cds-spacing-150);\n  "]))),actionBar:Object(Be.c)(xa||(xa=De()(["\n    display: flex;\n    justify-content: end;\n    align-items: center;\n  "])))},hints_HintMessage=function(e){var n,t=e.title,i=e.hintMessage,r=e.hintMessageId,o=e.defaultUserFeedback,s=useRolePlayHintsContext_useRolePlayHintsContext(),c=s.expandedHintMessages,d=s.setExpandedHintMessages,l=null!==(n=null==c?void 0:c[r])&&void 0!==n&&n,toggleExpanded=function(){d(O()(O()({},c),{},S()({},r,!l)))},u=a.useState(null!=o?o:T.a.unset),m=f()(u,2),p=m[0],g=m[1];return Object(Be.d)(Ve.a,{css:hr.hintContainer},Object(Be.d)(Ve.a,{role:"button",css:hr.hintHeader,"aria-expanded":l,onClick:toggleExpanded,tabIndex:0,"aria-controls":"hint-content-".concat(t),onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),toggleExpanded())}},Object(Be.d)(Ve.a,{css:hr.titleWrapper},Object(Be.d)(icons_LightBulbIcon,{color:l?"var(--cds-color-neutral-primary)":"var(--cds-color-grey-700)",height:16,width:16}),Object(Be.d)(ze.a,{component:"span",variant:"actionSecondary",css:hr.title(l)},t)),l?Ea||(Ea=Object(Be.d)(vr.a,null)):Na||(Na=Object(Be.d)(fr.a,null))),l&&Object(Be.d)(a.Fragment,null,Object(Be.d)(Ve.a,{css:hr.content},Object(Be.d)(ze.a,{id:"hint-content-".concat(t),component:"div",variant:"bodyPrimary",color:"emphasis.neutral"},i)),Object(Be.d)(Ve.a,{css:hr.actionBar},Object(Be.d)(R.d,{message:{text:i,customId:r,sender:T.c.RESPONSE,userFeedback:p},onFeedbackSelect:g}))))},br={panel:Object(Be.c)(_a||(_a=De()(["\n    background: var(--cds-color-neutral-background-primary);\n    border-radius: 12px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: calc(100% - ","px);\n  "])),68),hintsList:Object(Be.c)(Aa||(Aa=De()(["\n    display: flex;\n    flex-direction: column;\n    gap: var(--cds-spacing-150);\n    overflow-y: auto;\n    overflow-x: hidden;\n    margin: 0 var(--cds-spacing-50);\n    padding: var(--cds-spacing-200);\n    margin-bottom: auto;\n  "]))),askForHintButton:Object(Be.c)(Ta||(Ta=De()(["\n    margin-right: auto;\n    margin-left: var(--cds-spacing-200);\n    margin-bottom: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "]))),emptyState:Object(Be.c)(Ra||(Ra=De()(["\n    width: 300px;\n    padding-top: var(--cds-spacing-200);\n    padding-left: var(--cds-spacing-200);\n    padding-right: var(--cds-spacing-200);\n  "]))),loadingCard:Object(Be.c)(Ma||(Ma=De()(["\n    padding: var(--cds-spacing-300) var(--cds-spacing-200);\n  "])))},HintsPanel_AskHintButton=function(e){var n=e.onClick,t=e.disabled,a=e.loading;return Object(Be.d)(bn.b,{size:"small",variant:"secondary",onClick:n,css:br.askForHintButton,disabled:t,loading:a},Je()("Ask for a hint"))},HintsPanel_HintsPanelContent=function(e){var n=e.canAskForHint,t=useRolePlayHintsContext_useRolePlayHintsContext(),i=t.requestNewHint,r=t.hints,o=t.isLoadingNewHint,s=t.isLoadingExistingHints,c=t.error,d=t.courseId,l=t.itemId,u=t.expandedHintMessages,p=t.setExpandedHintMessages,v=a.useRef(void 0),f=a.useRef(null),h=a.useRef(null),k=Object(qe.e)(),C="NO_MESSAGES"===(null==c?void 0:c.type),y=o||s,I=r&&r.length>0,w=(null==r?void 0:r.length)||0,j=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId;Object(a.useEffect)((function(){var e=SidePanelPersistenceUtils_getSidePanelState(j);j&&null!=e&&e.expandedHintMessages&&p(null==e?void 0:e.expandedHintMessages)}),[j,p]),a.useEffect((function(){var e,n;f.current&&(null===(e=(n=f.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[w]),a.useEffect((function(){var e,n;h.current&&(null===(e=(n=h.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[o]);var x=function(){var e=g()(m()().mark((function _callee(){var e;return m()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return k("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_GENERATE_HINT",coach:{mode:b.g.CoachItem},product:{type:"course",id:d},courseItem:{id:l}}),n.next=3,i();case 3:(e=n.sent)&&e.length>0&&(v.current=e[e.length-1].messageId,p(O()(O()({},u),{},S()({},v.current,!0))));case 5:case"end":return n.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return!r&&C?Object(Be.d)("div",null,Object(Be.d)(ze.a,{variant:"bodyPrimary",color:"emphasis.neutral",component:"div",css:br.emptyState},Je()('Something went wrong, please try again by clicking “Ask for a hint"')),Object(Be.d)(HintsPanel_AskHintButton,{onClick:x,disabled:!n,loading:y})):I?Object(Be.d)("div",{css:br.panel},Object(Be.d)("div",{css:br.hintsList},r.map((function(e,n){var t=e.messageId===v.current;return Object(Be.d)("div",{key:e.messageId,ref:t?f:null},Object(Be.d)(hints_HintMessage,{title:Je()("Hint #{index}",{index:n+1}),hintMessage:e.message,hintMessageId:e.messageId,defaultUserFeedback:e.userFeedback}))})),o&&Object(Be.d)("div",{css:[hr.hintContainer,br.loadingCard],ref:h},Pa||(Pa=Object(Be.d)(li.a,{variant:"text"})),Fa||(Fa=Object(Be.d)(li.a,{variant:"text"})),La||(La=Object(Be.d)(li.a,{variant:"text"})))),Object(Be.d)("div",{"data-testid":"hints-footer"},Da||(Da=Object(Be.d)(un.a,null)),Object(Be.d)(HintsPanel_AskHintButton,{onClick:x,disabled:!n,loading:y}))):Object(Be.d)("div",{css:br.panel},Object(Be.d)("div",{"data-testid":"hints-empty-state"},Object(Be.d)(ze.a,{variant:"bodyPrimary",color:"emphasis.neutral",component:"div",css:br.emptyState},Je()("No hints here yet! When things get tricky, hints can point you in the right direction.")),Object(Be.d)(HintsPanel_AskHintButton,{onClick:x,disabled:!n,loading:y})))},hints_HintsPanel=function(e){var n=e.canAskForHint,t=e.onClose,i=useRolePlayHintsContext_useRolePlayHintsContext(),r=i.loadHints,o=i.hints,s=i.resetHintsChatSession,c=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId;return a.useEffect((function(){c&&r(),o&&!c&&s()}),[c]),Object(Be.d)(a.Fragment,null,Object(Be.d)(components_SidePanelHeader,{title:Je()("Hints"),subTitle:Je()("#{itemsCount} received",{itemsCount:(null==o?void 0:o.length)||0}),onClose:t}),Object(Be.d)(HintsPanel_HintsPanelContent,{canAskForHint:n}))},icons_TaskIcon=function(e){var n=e.color,t=void 0===n?"var(--cds-color-grey-950)":n,i=e.width,r=void 0===i?24:i,o=e.height,s=void 0===o?24:o;return(a.createElement("svg",{width:r,fill:t,height:s,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},a.createElement("mask",{id:"mask0_6366_5843",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16"},Ba||(Ba=a.createElement("rect",{width:"16",height:"16",fill:"var(--cds-color-grey-100)"}))),Ha||(Ha=a.createElement("g",{mask:"url(#mask0_6366_5843)"},a.createElement("path",{d:"M10.3333 13.2837L7.5 10.4503L8.43333 9.51699L10.3333 11.417L14.1 7.65033L15.0333 8.58366L10.3333 13.2837ZM14 6.66699H12.6667V3.33366H11.3333V5.33366H4.66667V3.33366H3.33333V12.667H7.33333V14.0003H3.33333C2.96667 14.0003 2.65278 13.8698 2.39167 13.6087C2.13056 13.3475 2 13.0337 2 12.667V3.33366C2 2.96699 2.13056 2.6531 2.39167 2.39199C2.65278 2.13088 2.96667 2.00033 3.33333 2.00033H6.11667C6.23889 1.61144 6.47778 1.29199 6.83333 1.04199C7.18889 0.791992 7.57778 0.666992 8 0.666992C8.44444 0.666992 8.84167 0.791992 9.19167 1.04199C9.54167 1.29199 9.77778 1.61144 9.9 2.00033H12.6667C13.0333 2.00033 13.3472 2.13088 13.6083 2.39199C13.8694 2.6531 14 2.96699 14 3.33366V6.66699ZM8 3.33366C8.18889 3.33366 8.34722 3.26977 8.475 3.14199C8.60278 3.01421 8.66667 2.85588 8.66667 2.66699C8.66667 2.4781 8.60278 2.31977 8.475 2.19199C8.34722 2.06421 8.18889 2.00033 8 2.00033C7.81111 2.00033 7.65278 2.06421 7.525 2.19199C7.39722 2.31977 7.33333 2.4781 7.33333 2.66699C7.33333 2.85588 7.39722 3.01421 7.525 3.14199C7.65278 3.26977 7.81111 3.33366 8 3.33366Z"})))))},kr={completedTask:Object(Be.c)(Va||(Va=De()(["\n    display: flex;\n    gap: var(--cds-spacing-100);\n    color: var(--cds-color-green-700);\n    text-decoration: line-through;\n  "]))),taskItemContainer:Object(Be.c)(Ua||(Ua=De()(["\n    margin-left: 0;\n    gap: var(--cds-spacing-50);\n    width: 100%;\n\n    &:not(:last-of-type) {\n      margin-bottom: var(--cds-spacing-50);\n    }\n  "]))),bulletStyle:Object(Be.c)(qa||(qa=De()(["\n    padding: unset !important;\n    padding-top: var(--cds-spacing-50) !important;\n    font-size: 24px;\n    color: var(--cds-color-grey-100);\n  "]))),taskItem:Object(Be.c)(za||(za=De()(["\n    margin: 0;\n    flex: 1;\n    padding: var(--cds-spacing-50) 0 !important;\n  "]))),iconContainer:Object(Be.c)(Ga||(Ga=De()(["\n    width: var(--cds-spacing-300);\n  "])))},TaskItem_CompletedTaskItem=function(e){var n=e.task;return Object(Be.d)("div",{css:kr.completedTask},Object(Be.d)("div",{css:kr.iconContainer},Wa||(Wa=Object(Be.d)(Ze.a,{size:"medium",color:"success"}))),Object(Be.d)(ze.a,{"data-testid":"completed-task-".concat(n.title),component:"p",variant:"bodySecondary",color:"success"},n.title))},TaskItem_LoadingTaskItem=function(){return Object(Be.d)(Ve.a,{container:!0,spacing:8,css:kr.taskItemContainer},Object(Be.d)(Ve.a,{item:!0,css:kr.bulletStyle},Object(Be.d)("div",{css:kr.iconContainer},"•")),Object(Be.d)(Ve.a,{item:!0,css:kr.taskItem},Ya||(Ya=Object(Be.d)(li.a,{height:32,"data-testid":"loading-screen"}))))},TaskItem_TaskItem=function(e){var n=e.task;return Object(Be.d)(Ve.a,{container:!0,spacing:12,css:kr.taskItemContainer},Object(Be.d)(Ve.a,{item:!0,css:kr.bulletStyle},Object(Be.d)("div",{css:kr.iconContainer},"•")),Object(Be.d)(Ve.a,{item:!0,css:kr.taskItem},Object(Be.d)(ze.a,{key:n.id,"data-testid":"todo-task-".concat(n.title),component:"span",variant:"bodySecondary",color:"supportText"},n.title)))},Cr={taskPanelContent:Object(Be.c)(Ka||(Ka=De()(["\n    display: flex;\n    flex-direction: column;\n    padding: var(--cds-spacing-200);\n    gap: var(--cds-spacing-100);\n  "]))),loadingTaskItemContainer:Object(Be.c)(Qa||(Qa=De()(["\n    padding: var(--cds-spacing-200);\n  "])))},tasks_TasksPanelContent=function(e){var n=e.todoTasks,t=e.completedTasks;if(e.isLoading)return Object(Be.d)("div",{css:Cr.loadingTaskItemContainer,"data-testid":"task-loading"},Ja||(Ja=Object(Be.d)(TaskItem_LoadingTaskItem,null)),$a||($a=Object(Be.d)(TaskItem_LoadingTaskItem,null)),Xa||(Xa=Object(Be.d)(TaskItem_LoadingTaskItem,null)),Za||(Za=Object(Be.d)(TaskItem_LoadingTaskItem,null)));var i=n.length>0&&t.length>0;return Object(Be.d)("div",{css:Cr.taskPanelContent,"data-testid":"task-list"},n.map((function(e){return Object(Be.d)(a.Fragment,{key:e.id},Object(Be.d)(TaskItem_TaskItem,{task:e}))})),i&&(ei||(ei=Object(Be.d)(un.a,null))),t.map((function(e){return Object(Be.d)(a.Fragment,{key:e.id},Object(Be.d)(TaskItem_CompletedTaskItem,{task:e}))})))},tasks_TasksPanel=function(e){var n=e.onClose,t=useRolePlayTasksContext_useRolePlayTasksContext(),i=t.tasks,r=t.isTaskListLoading,o=t.loadTaskList,s=t.setShouldSkipChatHistory,c=t.taskChatSessionId,d=t.resetTaskChatSession,l=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId,u=(i||[]).filter((function(e){return e.completed})),m=(i||[]).filter((function(e){return!e.completed}));return a.useEffect((function(){c&&!l&&d(),l&&(o(l),s(!1))}),[l,c]),Object(Be.d)(a.Fragment,null,Object(Be.d)(components_SidePanelHeader,{title:Je()("Tasks"),subTitle:Je()("#{completedTasksCount}/#{totalTasksCount} complete",{completedTasksCount:u.length,totalTasksCount:u.length+m.length}),onClose:n}),Object(Be.d)(tasks_TasksPanelContent,{todoTasks:m,completedTasks:u,isLoading:r}))},Sr={chatViewContainer:Object(Be.c)(ni||(ni=De()(["\n    padding: 0;\n    height: calc(100% - ","px);\n    border-radius: 0 0 var(--cds-spacing-150) var(--cds-spacing-150);\n\n    > div {\n      border-radius: 0;\n    }\n\n    "," {\n      overflow: hidden;\n    }\n  "])),68,He.a.down("sm"))},chat_view_RolePlayChatView=function(e){var n,t,i=e.chatHeader,r=e.overviewInstructions,o=useRolePlayTasksContext_useRolePlayTasksContext().isTaskResponseLoading,s=useCoachItemChatContext_useCoachItemChatContext(),c=s.rolePlaySimulationSessionId,d=s.rolePlayDebriefSessionId,l=s.itemId,u=SidePanelPersistenceUtils_getSidePanelState(c)||{},m=u.selectedPanelStatus,p=u.selectedPanel,g=useSidePanelContext_useSidePanelContext(),v=g.setSelectedPanelStatus,f=g.setSelectedPanel,h=g.selectedPanelStatus,b=g.selectedPanel;a.useEffect((function(){m&&m!==h&&v(m,c),p&&p!==b&&f(p,c)}),[c,m,p,h,b,v,f]);var k=b,C="expanded"===h,S=Object(qe.e)(),y=a.useCallback((function(){v("collapsed",c)}),[v,c]),O=a.useMemo((function(){return[{name:"overview",displayName:Je()("Overview"),icon:ti||(ti=Object(Be.d)(cr.a,null)),component:n||(n=Object(Be.d)(components_RolePlayOverviewPanel,{overviewInstructions:r,onClose:y})),enabled:!0},{name:"tasks",displayName:Je()("Tasks"),icon:ai||(ai=Object(Be.d)(icons_TaskIcon,null)),component:t||(t=Object(Be.d)(tasks_TasksPanel,{onClose:y})),enabled:!!c},{name:"hints",displayName:Je()("Hints"),icon:ii||(ii=Object(Be.d)(lr,null)),component:Object(Be.d)(hints_HintsPanel,{canAskForHint:!d,onClose:y}),enabled:!!c}]}),[r,y,c,d]);return Object(Be.d)(components_SplitPanelView,{isSidePanelExpanded:C,mainContent:Object(Be.d)(a.Fragment,null,i,Object(Be.d)(chat_view_ChatView,{onStartButtonClick:function(e){f("tasks",e),v("expanded",e)},onTryAgainClick:function(){f("overview"),v("expanded")},isTaskResponseLoading:o,styles:Sr.chatViewContainer})),panels:O,selectedPanel:k,onPanelChange:function(e,n){var t=n?"expanded":"collapsed";S("toggle_side_panel",{sidePanel:{name:e,status:n?"open":"closed"},courseItem:{id:l,type:"role_play"}}),f(e,c),v(t,c)},testId:"role-play-chat-view"})},chat_view_RolePlayChatViewTunnelVision=function(e){var n=e.overviewInstructions,t=useCoachItemChatContext_useCoachItemChatContext(),i=t.itemName,r=t.setChatIsOpen,o=t.chatIsOpen,s=t.rolePlaySimulationSessionId,c=t.rolePlayDebriefSessionId,d=t.isRolePlayEndedByUser,l=useSidePanelContext_useSidePanelContext(),u=l.setSelectedPanelStatus,m=l.setSelectedPanel,p=Object(h.c)((function(e){return e.behavior})).messageLoader,g=useRolePlayHintsContext_useRolePlayHintsContext().resetHintsChatSession,v=useRolePlayTasksContext_useRolePlayTasksContext().resetTaskChatSession,b=Object(qe.e)(),k=a.useState(!1),C=f()(k,2),S=C[0],y=C[1],O=a.useCallback((function(){b("click_button",{button:{name:"coach_item_tv_back_button"}}),r(!1)}),[r,b]),onNewChatButtonConfirm=function(){m("overview",s),u("expanded",s),g(),v(),SidePanelPersistenceUtils_clearSidePanelState(s)},handleToggleEndRolePlayDialog=function(){y(!S)};return Object(Be.d)(components_TunnelVision,{isOpen:o,ariaLabel:Je()("Role Play")},Object(Be.d)(chat_view_RolePlayChatView,{overviewInstructions:n,chatHeader:Object(Be.d)(MainPanelHeader_MainPanelHeader,{title:i,subTitle:Je()("Role Play"),onClose:O,closeButtonAriaLabel:Je()("Close Role Play"),headerRightElement:c&&!d?Object(Be.d)(chat_view_NewChatButton,{onConfirm:onNewChatButtonConfirm,buttonText:Je()("Try again"),useIconButton:!1}):!c&&s?Object(Be.d)(Zi.a,{size:"small",variant:"ghost",onClick:handleToggleEndRolePlayDialog,disabled:p},Je()("End Role Play")):void 0})}),Object(Be.d)(chat_view_EndRolePlayDialog,{onClose:handleToggleEndRolePlayDialog,isOpen:S}))};e.a=Object(r.b)(Object(o.a)(["CourseStore"],(function(e){return{courseMaterial:e.CourseStore.getMaterials()}})))((function(e){var n,t=e.computedItem,i=e.markComplete,r=e.markStarted,o=e.configuration,d=e.courseMaterial,l=e.refreshCompletedStatus,u=e.courseBranchId,m=t.id,p=t.name,g=t.courseId,v=t.isStarted,f=t.isCompleted,h=null==o?void 0:o.coverPageInstructions,b=null==o?void 0:o.versionedCoachItemType,k=parseInt(null==b?void 0:b.split("@")[1],10)||0,C=Object(ye.p)(b),S=null===(n=o.promptParameters)||void 0===n?void 0:n[Ie.f.aiPersonaRole],y=d.getItemMetadata(m),O=d.getNeighboringNavigationItems(y).next,I=null==O?void 0:O.getLink();return a.useEffect((function(){var e=Object(c.b)(),n=e.external_id,t=e.is_staff;s.b.init({visitor:{id:n,isCourserian:Object(c.d)(),isStaff:t}},s.a)}),[]),a.createElement(useCoachItemChatContext_CoachItemChatContextProvider,{courseId:g,courseBranchId:u,itemId:m,itemName:p,nextItemLink:I,coachItemType:C,rolePlayAiPersonaTitle:S,onCloseChat:l,markItemComplete:i},a.createElement(components_CoverPage,{instructions:h,isCompleted:f,isStarted:v,markStarted:r,markComplete:i,promptVersion:k}),C===Ie.e.SocraticDialogue&&(ri||(ri=a.createElement(chat_view_DialogueChatViewTunnelVision,null))),C===Ie.e.RolePlay&&a.createElement(useSidePanelContext_SidePanelProvider,null,a.createElement(useRolePlayTasksContext_RolePlayTasksContextProvider,{courseId:g,itemId:m,courseBranchId:u},a.createElement(useRolePlayHintsContext_RolePlayHintsContextProvider,{courseId:g,itemId:m,courseBranchId:u},a.createElement(chat_view_RolePlayChatViewTunnelVision,{overviewInstructions:h})))))}))},"84CE":function(module,exports){module.exports="https://coursera_assets.s3.amazonaws.com/images/c48c9c9403686e86b0563fb4ea92fd18.svg"},IyUU:function(module,exports){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AiCoach_CreateChatSession"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateChatSessionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach_CreateChatSession"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:146}};e.loc.source={body:"mutation AiCoach_CreateChatSession($input: AiCoach_CreateChatSessionInput!) {\n  AiCoach_CreateChatSession(input: $input) {\n    id\n    title\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoach_CreateChatSession=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoach_CreateChatSession")},J2jR:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachClipRecommendations"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ClipRecommendation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"course"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachMessageCourse"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"partners"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"abbreviatedName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"logo"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewImage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:276}};n.loc.source={body:'#import "./aiCoachMessageCourseFragment.graphql"\n\nfragment AiCoachClipRecommendations on AiCoach_ClipRecommendation {\n  course {\n    ...AiCoachMessageCourse\n  }\n  partners {\n    abbreviatedName\n    name\n    logo\n  }\n  itemTitle\n  itemSlug\n  itemId\n  previewImage\n  duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wuXY").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachClipRecommendations=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachClipRecommendations")},P1ex:function(module,exports){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AiCoach_ChatSessionsByUserId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"queryChatSessionsByUserId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalElements"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:299}};e.loc.source={body:"query AiCoach_ChatSessionsByUserId($userId: ID!, $limit: Int) {\n  AiCoach {\n    queryChatSessionsByUserId(userId: $userId, limit: $limit) {\n      elements {\n        createdAt\n        id\n        title\n        userId\n        status\n      }\n      pagination {\n        totalElements\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoach_ChatSessionsByUserId=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoach_ChatSessionsByUserId")},RNb2:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachReadingItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ReadingItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"readingDuration"},name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:182}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n\nfragment AiCoachReadingItem on AiCoach_ReadingItemMetadata {\n  ...ItemMetadataFields\n  itemTitle\n  readingDuration: duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wBc2").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachReadingItem=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachReadingItem")},X9Xi:function(module,e,n){"use strict";n.r(e);var t=n("pVnL"),a=n.n(t),i=n("VbXa"),r=n.n(i),o=n("VkAN"),s=n.n(o),c=n("OhL7"),d=n("q1tI"),l=n("17x9"),u=n.n(l),m=n("S+eF"),p=n.n(m),g=n("MnCE"),v=n("/ukj"),f=n("sQ/U"),h=n("Gok7"),b=n("TOZ3"),k=n("EBS+"),C=n("5B3L"),S=n("YmkS"),y=n("pnKK"),O=n("q5zD"),I=n("w/oa"),w=n("15pW"),j=n("qyGb"),x=n("Ezgt"),E=n("v6sC"),N=Object(E.a)("/api/onDemandWidgetProgress.v1",{type:"rest"}),A={markComplete:function(e,n,t,a){var i={data:{sessionId:a,progressState:"Completed"}},r=[t,n,e].join("~");return p()(N.put(r,i))},markStarted:function(e,n,t,a){var i={data:{sessionId:a,progressState:"Started"}},r=[t,n,e].join("~");return p()(N.put(r,i))}},T=A,WidgetItemActions_refreshProgress=function(e,n,t,a,i){t.setState(n),e.executeAction(x.b,{courseProgress:a}),i&&e.executeAction(j.a,{courseSlug:i,refetch:!0})},WidgetItemActions_markItemComplete=function(e,n){var t=n.itemId,a=n.courseId,i=n.userId,r=n.itemProgress,o=n.courseProgress,s=n.sessionId,c=n.courseSlug;return T.markComplete(t,a,i,s).then(WidgetItemActions_refreshProgress(e,w.d.progressCompleted,r,o,c))},WidgetItemActions_markItemStarted=function(e,n){var t=n.itemId,a=n.courseId,i=n.userId,r=n.itemProgress,o=n.courseProgress,s=n.sessionId;return T.markStarted(t,a,i,s).then(WidgetItemActions_refreshProgress(e,w.d.progressStarted,r,o))},R=n("++Ya"),M=n("PStO"),P=function(e){function OnDemandWidgetSessionsV1(){return e.apply(this,arguments)||this}return r()(OnDemandWidgetSessionsV1,e),OnDemandWidgetSessionsV1}(n("HlCP").a);P.RESOURCE_NAME="onDemandWidgetSessions.v1";var F,L,D=P,hooks_useWidgetSession=function(e,n,t,a){var i=Object(f.b)().id,r=Object(R.c)([i.toString(),e,n]),o=Object(M.c)((function(){return t?{}:a?{widgetSessionWithoutProgressUpdate:D.finder("getWithoutProgressUpdate",{fields:["session","sessionId"],params:{id:r}})}:{widgetSession:D.get(r,{fields:["session","sessionId"]})}}),[r]).data,s=o.widgetSession,c=o.widgetSessionWithoutProgressUpdate;return null!=s?s:null==c?void 0:c[0]},isCompatibleWithMobile=function(e){var n=e.supportsTouch,t=e.minWidthPx,a=e.minHeightPx,i=function(){var e,n;if("undefined"!=typeof document&&"undefined"!=typeof window){var t=window.screen;if(void 0!==window.screen)e=t.height,n=t.width;else e=window.innerHeight,n=window.innerWidth}else e=0,n=0;return{deviceHeight:e,deviceWidth:n}}(),r=i.deviceWidth,o=i.deviceHeight;return!1!==n&&(!(void 0!==t&&t>r)&&!(void 0!==a&&a>o))},B=n("z3RS"),H=n("cVIm"),V=n("kvW3"),U=n("gKW9"),q=n.n(U),z=(n("46xw"),"".concat(H.a.url.resource_assets,"widget/svgcomputer.svg")),G=function(e){function UnavailableOnMobileMessage(){return e.apply(this,arguments)||this}return r()(UnavailableOnMobileMessage,e),UnavailableOnMobileMessage.prototype.render=function(){var e=this.props.name;return(d.createElement("div",{className:"rc-UnavailableOnMobileMessage vertical-box align-items-absolute-center"},d.createElement("div",{className:"headline-5-text p-x-1"},e),d.createElement("div",{className:"body-1-text p-x-1 p-b-2"},d.createElement(V.b,{message:q()("This item was not designed for use on a small screen.")})),d.createElement("div",{className:"align-horizontal-center p-b-2"},d.createElement("img",{className:"computer-icon",src:z,alt:q()("Computer Icon"),height:"120",width:"220"})),d.createElement("div",{className:"body-1-text horizontal-box align-horizontal-center p-x-1"},d.createElement(V.b,{message:q()("Please use a computer or laptop to complete this item.")}))))},UnavailableOnMobileMessage}(d.Component),W=n("Jz+x"),Y=n("TdzE"),K=n("2Kkf"),Q=n("emlC"),J=n("35G5"),X=n("/AOU"),Z=n("w/Ge"),ee={widgetItem:Object(c.c)(F||(F=s()(["\n    margin: 20px auto;\n    max-width: 960px;\n\n    @media (max-width: 768px) {\n      margin: 0;\n      max-width: 100%;\n    }\n  "])))},ne=[X.c.SET_COMPLETE,X.c.SET_GRADED_COMPLETE],te=function(e){function WidgetItem(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(n=e.call.apply(e,[this].concat(a))||this).state={iFrameMessages:[],widgetId:Object(Z.b)(),itemProgressState:null,markCompleteDeferred:null,isExpanded:!1},n.onReceiveMessage=function(e){var t=n.state.iFrameMessages;if(t.push(e),n.setState({iFrameMessages:t}),e.type===X.c.SET_COMPLETE){n.markComplete();var a=p.a.defer();return n.setState({markCompleteDeferred:a}),a.promise}if(e.type===X.c.SET_GRADED_COMPLETE){n.markComplete();var i=p.a.defer();return n.setState({markCompleteDeferred:i}),i.promise}return p()()},n.onToggleExpanded=function(){return n.setState((function(e){return{isExpanded:!e.isExpanded}}))},n.markComplete=function(){var e=n.props,t=e.computedCourseProgress.courseProgress,a=e.computedItem,i=e.courseId,r=e.sessionId,o=e.courseSlug,s=t.getItemProgress(a.id),c=f.a.get().id,d=a.id;I.d(t.get("id"),t),n.context.executeAction(WidgetItemActions_markItemComplete,{itemId:d,courseId:i,userId:c,itemProgress:s,courseProgress:t,sessionId:r,courseSlug:o})},n.markStarted=function(){var e=n.props,t=e.computedCourseProgress.courseProgress,a=e.computedItem,i=e.courseId,r=e.sessionId,o=t.getItemProgress(a.id),s=f.a.get().id,c=a.id;n.context.executeAction(WidgetItemActions_markItemStarted,{itemId:c,courseId:i,userId:s,itemProgress:o,courseProgress:t,sessionId:r})},n.isOnMobile=function(){var e=n.context.getStore("ApplicationStore").getUserAgent(),t=e&&e.isMobileBrowser;return v.a.get()||t},n}r()(WidgetItem,e);var n=WidgetItem.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var n=this.props,t=n.computedItem,a=n.computedCourseProgress.courseProgress.getItemProgress(t.id);a.getState()!==this.state.itemProgressState&&(this.setState({itemProgressState:a.getState()}),this.state.markCompleteDeferred&&(this.state.markCompleteDeferred.resolve(),this.setState({markCompleteDeferred:null})))},n.render=function(){var e,n=this,t=this.props,a=t.session,i=t.sessionId,r=t.computedItem,o=t.courseBranchId,s=t.itemMetadata,d=t.courseMaterials,l=null==d?void 0:null===(e=d.getNeighbors(s))||void 0===e?void 0:e.nextItemMetadataOrItemGroup,u=this.state.isExpanded;return a?this.isOnMobile()&&!isCompatibleWithMobile(r.contentSummary.definition)?Object(c.d)(G,{name:r.name}):Object(c.d)("div",{css:ee.widgetItem},Object(c.d)(h.a,{component:"h1",className:"rc-A11yScreenReaderOnly"},r.name),Object(c.d)(y.a,{courseId:r.courseId,show:!0}),Object(c.d)(B.a,{itemName:r.name,itemMetadata:s,courseId:r.courseId}),Object(k.o)(a.iframeTitle)?Object(c.d)(C.a,{computedItem:r,configuration:a.configuration.data,markComplete:this.markComplete,markStarted:this.markStarted,refreshCompletedStatus:this.props.refreshCourseProgress,courseBranchId:o}):Object(c.d)(J.a,{inWidgetItem:!0,session:a,sessionId:i,onToggleExpanded:this.onToggleExpanded,widgetId:this.state.widgetId,parentRpcActions:ne,isComplete:r.isCompleted,widgetContentTitle:r.name,nextItem:l,markComplete:function(){n.markComplete()}}),Object(c.d)(b.b,{"aria-hidden":u,style:{marginTop:"50px",borderTop:"1px solid var(--cds-color-grey-25)",paddingTop:"15px",paddingBottom:"15px"}},Object(c.d)(S.a,{computedItem:r,itemFeedbackType:"widget"}))):L||(L=Object(c.d)("div",{className:"horizontal-box align-items-absolute-center widget-iframe"},Object(c.d)(O.a,{name:"spinner",size:"2x",spin:!0,className:"color-hint-text"})))},WidgetItem}(d.Component);te.contextTypes={executeAction:u.a.func.isRequired,getStore:u.a.func.isRequired};var ae=Object(g.b)(Object(Y.b)(),Object(W.a)(),Object(Q.a)(["CourseStore","SessionStore"],(function(e){var n=e.CourseStore,t=e.SessionStore;return{courseId:n.getCourseId(),courseSlug:n.getCourseSlug(),courseMaterials:n.getMaterials(),courseBranchId:t.getBranchId()}})),K.a)((function(e){var n=e.computedItem,t=n.courseId,i=n.id,r=hooks_useWidgetSession(t,i);return Object(c.d)(te,a()({},e,{session:null==r?void 0:r.session,sessionId:null==r?void 0:r.sessionId}))}));e.default=ae},ZGIP:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachLectureItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_LectureItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"lectureDuration"},name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:182}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n\nfragment AiCoachLectureItem on AiCoach_LectureItemMetadata {\n  ...ItemMetadataFields\n  itemTitle\n  lectureDuration: duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wBc2").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachLectureItem=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachLectureItem")},"b+Bk":function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreateUserMessageResult"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponseResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messageByAiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"senderType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messageId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"chatSessionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"session"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"recommendedActions"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionMessage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clipRecommendations"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachClipRecommendations"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"navigationButtons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"navigationLeadingMessage"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponse"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponseInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreateUserMessageResult"},directives:[]}]}}]}}],loc:{start:0,end:929}};n.loc.source={body:'#import "./aiCoachGoToFirstItemNavigationButtonFragment.graphql"\n#import "./aiCoachClipRecommendationsFragment.graphql"\n\nfragment CreateUserMessageResult on AiCoach_CreateUserMessageAndReturnResponseResult {\n  messageByAiCoach {\n    message\n    senderType\n    messageId\n  }\n  chatSessionId\n  session {\n    id\n    status\n  }\n  recommendedActions @include(if: $recommendedActionsEnabled) {\n    action\n    actionMessage\n  }\n  clipRecommendations @include(if: $clipRecommendationsEnabled) {\n    ...AiCoachClipRecommendations\n  }\n  navigationButtons {\n    navigationLeadingMessage\n\n    ...GoToFirstItemNavigationButton\n  }\n}\n\nmutation AiCoach_CreateUserMessageAndReturnResponse(\n  $input: AiCoach_CreateUserMessageAndReturnResponseInput!\n  $recommendedActionsEnabled: Boolean = false\n  $clipRecommendationsEnabled: Boolean = false\n) {\n  AiCoach_CreateUserMessageAndReturnResponse(input: $input) {\n    ...CreateUserMessageResult\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wjFw").definitions)),n.definitions=n.definitions.concat(unique(e("J2jR").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}function oneQuery(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.CreateUserMessageResult=oneQuery(n,"CreateUserMessageResult"),module.exports.AiCoach_CreateUserMessageAndReturnResponse=oneQuery(n,"AiCoach_CreateUserMessageAndReturnResponse")},j5nu:function(module,exports,e){},uSn8:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachNavigationButtons"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_NavigationButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"navigationLeadingMessage"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},directives:[]}]}}],loc:{start:0,end:195}};n.loc.source={body:'#import "./aiCoachGoToFirstItemNavigationButtonFragment.graphql"\n\nfragment AiCoachNavigationButtons on AiCoach_NavigationButton {\n  navigationLeadingMessage\n\n  ...GoToFirstItemNavigationButton\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wjFw").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachNavigationButtons=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachNavigationButtons")},wBc2:function(module,exports){var e={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ItemMetadataFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"course"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemSlug"},arguments:[],directives:[]}]}}],loc:{start:0,end:100}};e.loc.source={body:"fragment ItemMetadataFields on AiCoach_ItemMetadata {\n  course {\n    slug\n  }\n  itemId\n  itemSlug\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.ItemMetadataFields=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"ItemMetadataFields")},wjFw:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_GoToFirstItemNavigationButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemMetadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_GenericItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_LectureItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachLectureItem"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ReadingItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachReadingItem"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_QuizItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numQuestions"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_AssignmentItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numQuestions"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:715}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n#import "./aiCoachReadingItemFragment.graphql"\n#import "./aiCoachLectureItemFragment.graphql"\n\nfragment GoToFirstItemNavigationButton on AiCoach_GoToFirstItemNavigationButton {\n  itemMetadata {\n    ... on AiCoach_GenericItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n    }\n    ... on AiCoach_LectureItemMetadata {\n      ...AiCoachLectureItem\n    }\n    ... on AiCoach_ReadingItemMetadata {\n      ...AiCoachReadingItem\n    }\n    ... on AiCoach_QuizItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n      numQuestions\n    }\n    ... on AiCoach_AssignmentItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n      numQuestions\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wBc2").definitions)),n.definitions=n.definitions.concat(unique(e("RNb2").definitions)),n.definitions=n.definitions.concat(unique(e("ZGIP").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.GoToFirstItemNavigationButton=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"GoToFirstItemNavigationButton")},wuXY:function(module,exports){var e={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachMessageCourse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Course_Course"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}],loc:{start:0,end:70}};e.loc.source={body:"fragment AiCoachMessageCourse on Course_Course {\n  id\n  slug\n  name\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoachMessageCourse=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoachMessageCourse")},xeAZ:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MessagesByChatIdResult"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ChatMessagesPaginatedResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"session"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalElements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userFeedback"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userComments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"senderType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"courseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"structuredResponse"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommendedActions"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionMessage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clipRecommendations"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachClipRecommendations"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"navigationButtons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachNavigationButtons"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AiCoach_ChatMessagesPaginatedResult"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"chatSessionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"queryByChatSessionId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"chatSessionId"},value:{kind:"Variable",name:{kind:"Name",value:"chatSessionId"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MessagesByChatIdResult"},directives:[]}]}}]}}]}}],loc:{start:0,end:1052}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n#import "./aiCoachNavigationButtonsFragment.graphql"\n#import "./aiCoachClipRecommendationsFragment.graphql"\n\nfragment MessagesByChatIdResult on AiCoach_ChatMessagesPaginatedResult {\n  session {\n    id\n    status\n  }\n  pagination {\n    totalElements\n    cursor\n  }\n  elements {\n    userFeedback\n    userComments\n    senderType\n    message\n    itemId\n    createdAt\n    courseId\n    id\n    structuredResponse\n    recommendedActions @include(if: $recommendedActionsEnabled) {\n      actionMessage\n      action\n    }\n    clipRecommendations @include(if: $clipRecommendationsEnabled) {\n      ...AiCoachClipRecommendations\n    }\n    navigationButtons {\n      ...AiCoachNavigationButtons\n    }\n  }\n}\n\nquery AiCoach_ChatMessagesPaginatedResult(\n  $chatSessionId: ID!\n  $limit: Int!\n  $recommendedActionsEnabled: Boolean = false\n  $clipRecommendationsEnabled: Boolean = false\n) {\n  AiCoach {\n    queryByChatSessionId(chatSessionId: $chatSessionId, limit: $limit) {\n      ...MessagesByChatIdResult\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wBc2").definitions)),n.definitions=n.definitions.concat(unique(e("uSn8").definitions)),n.definitions=n.definitions.concat(unique(e("J2jR").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}function oneQuery(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.MessagesByChatIdResult=oneQuery(n,"MessagesByChatIdResult"),module.exports.AiCoach_ChatMessagesPaginatedResult=oneQuery(n,"AiCoach_ChatMessagesPaginatedResult")}}]);
//# sourceMappingURL=59.c069a2795d6a783266d6.js.map